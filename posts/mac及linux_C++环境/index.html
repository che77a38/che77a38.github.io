<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>mac及linux C++环境配置 | ZEROKO14的个人博客</title><meta name="keywords" content="C++"><meta name="author" content="ZEROKO14"><meta name="copyright" content="ZEROKO14"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#18171d"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="mac及linux C++环境配置"><meta name="application-name" content="mac及linux C++环境配置"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#18171d"><meta property="og:type" content="article"><meta property="og:title" content="mac及linux C++环境配置"><meta property="og:url" content="https://che77a38.github.io/posts/mac%E5%8F%8Alinux_C++%E7%8E%AF%E5%A2%83/index.html"><meta property="og:site_name" content="ZEROKO14的个人博客"><meta property="og:description" content="mac及linux C++环境配置   linux系统介绍  什么是linux系统？ linux是开源的操作系统  多用户多任务 windows属于：单用户，多任务。 Linux属于：多用户，多任务 vscode快捷键   功能 快捷键    转到文件 command+p   命令面板 F1   打"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://avatars.githubusercontent.com/u/27732581?s=400&amp;u=303b2c0e2118ad20406f8d718e885bcf99fc8bf8&amp;v=4"><meta property="article:author" content="ZEROKO14"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://avatars.githubusercontent.com/u/27732581?s=400&amp;u=303b2c0e2118ad20406f8d718e885bcf99fc8bf8&amp;v=4"><meta name="description" content="mac及linux C++环境配置   linux系统介绍  什么是linux系统？ linux是开源的操作系统  多用户多任务 windows属于：单用户，多任务。 Linux属于：多用户，多任务 vscode快捷键   功能 快捷键    转到文件 command+p   命令面板 F1   打"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="https://che77a38.github.io/posts/mac%E5%8F%8Alinux_C++%E7%8E%AF%E5%A2%83/"><link rel="preconnect" href="//cdn.cbd.int"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: {"enable":true,"img":"https://upload-bbs.miyoushe.com/upload/2024/07/27/125766904/ba62475f396df9de3316a08ed9e65d86_5680958632268053399..png"},
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  music_page_default: "nav_music",
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: undefined,
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":true,"limitCount":50,"languages":{"author":"作者: ZEROKO14","link":"链接: ","source":"来源: ZEROKO14的个人博客","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'ZEROKO14的个人博客',
  title: 'mac及linux C++环境配置',
  postAI: '',
  pageFillDescription: 'vscode快捷键, makeFile学习, 编译器相关, 编译时相关文件查找顺序, GDB调试器, GDB主要功能, 常用调试命令参数, list显示代码命令详解, break设置断点命令详解, 简单断点–当前文件, 多文件设置断点, 查询所有断点, 条件断点, 维护断点, 调试代码, 显示运行中信息, makefile基本格式, makefile中的变量, 模式规则, makefile的清理操作, makefile命令中的特殊符号, make命令的参数, makefile的常见函数, cmake学习, 语法特性介绍, 重要指令, CMake常用变量, CMAKE编译工程, 两种方式设置编译规则, 编译流程, 两种构建方式, 【实战】CMake代码实践, 最小的CMake工程, 多目录工程-直接编译, vscode配合cmake进行调试, cmake进阶, 现代CMAKE, 终端指令学习, 基本指令, homebrew常用命令, 浅克隆问题, win终端命令相关, 终端命令重命名, powershell新建文件命令, 工具命令, ssh, scp, 代码调试, IDE相关tips, vs开发linux项目, VS远程开发, vscode远程开发, vscode配置C++调试, code runner配置, windows下的vscode终端乱码, vscode的配置文件, tasks.json, launch.json, 案例, c_cpp_properties.json, vscode插件, CMake Tools插件, vscode clangd插件, vscode Clang-Format插件, tabout, gitlens, 文件路径跳转插件, Cx2FC++ Include Guard插件, c cpp cmake project creator插件, Debug Visualizer, 变量名翻译, 自动补分号, 单元测试插件, 容器开发支持, docker插件, Dev Containers插件, 代码悬浮翻译插件, 日志文件高亮显示插件, 自动生成Getter和Setter函数, 一键复制文件给AI等结合Aider使用, 可视化文件插件, JavaScript Debugger, css pick, console ninja, Code spell chacker, 代码书签插件, 注释中的todo高亮插件, 粘贴JSON变为类, c相关插件盘点, 从CSharp代码生成PlantUML类图, vscode配置qt开发, vs团队资源管理器, 主页介绍, vscode相关设置, vs相关设置, 给windows配置ssh server, 代理相关, 代理模式, DNS分流, UDP穿透篇, clash配置文件, 兼容性相关, 交叉编译, 基于gitlab的工作流程设计, 软件开发阶段, m1 mac Rosetta2转译, mac上部署docker开发环境, clion配置示例, 配置vcpkg, 运行效果, valgrind使用, vscode使用docker开发环境, 使用Dev Containers开发流程, 已经存在容器, Dev Containers自带的开发容器, 如果连接的是远程主机上的docker, mac环境变量配置, mac上的虚拟机方案及环境配置系统介绍什么是系统是开源的操作系统多用户多任务属于单用户多任务属于多用户多任务快捷键功能快捷键转到文件命令面板打开跳转到终端或变量统一重命名开关侧边栏转到定义处代码格式化然后当前行下方插入一行当前行上方插入一行定义处缩略图只看一眼而不跳转过去删除当前行光标右侧所有的字符多光标同时输入左键选多行同时选中所有匹配可以方便修改和添加东西怕上面命令匹配太多可以逐个匹配回到上一个光标操作整个项目中查找全屏字体和窗口大小调整撤销恢复撤销单步步过单步步入选中当前行返回上一个标签页上下移动当前光标的代码上下上下复制当前光标的代码上下折叠代码块然后展开代码块然后当前代码大纲当前代码大纲使用转到文件然后输入学习下的开发环境安装更新安装源安装和的开发库安装调试工具远程连接工具编辑工具安装好开发环境后当输入命令时会在当前目录下找或文件来执行为什么要学习下编程应用广泛编译移植开源项目大部分开源项目都基于学会才能够调试编译过程中的问题手写太过于繁琐自动生成的不易于配置学习本门课程便携自动化以后新项目只需要头文件学习理解大型项目怎么分布编译的目标从零开始学会写第一个编译项目能够掌握原理能够灵活应用学会变量函数实战方法学会便携执行程序动态库静态库的学会通过一个编译所有的项目学会编写安装和卸载学会使用自动生成启动和停止脚本编译器相关什么是编译器是一个根据源代码生成机器码的程序厂商一个源代码经过预处理编译源码生成汇编语言针对的是单文件汇编汇编语言生成二进制代码针对的是单文件链接多文件之间的关系整合起来找不到就会报错运行在下链接是找的文件运行时找的文件在下链接和运行找的都是文件常用选项选项含义仅对源文件进行编译不链接生成可执行文件在对源文件进行查错时或只需产生目标文件时可以使用该选项生成调试信息在可执行文件中加入调试信息方便进行程序的调试如果使用中括号中的选项表示加入拓展的调试信息方便使用来进行调试或或或或对生成的代码使用优化中括号中的部分为优化级别缺省的情况为级优化为不进行优化注意采用更高级的优化并不一定得到效率更高的代码表示具体的路径在编译源程序时增加一个搜素头文件的额外目录即增加一个搜索的额外目录可以设置多个表示具体的路径在编译源文件时增加一个搜索库文件动态库或静态库的额外目录可以设置多个表示具体库的名字在编译链接文件时增加一个额外的库库名为即此处写的名字是要去前缀和后缀的禁止所有警告表示具体的取值允许产生类型的警告可以是等很多取值最常用是表示产生所有警告如果取值为其含义是将所有警告作为错误即出现警告就停止编译编译动态链接库编译选项产生位置无关代码一般创建共享库时用到在上的代码的符号引用都是通过进行操作的产生动态链接库例如编译动态链接库静态库编译中的静态库是后缀参数讲解不显示创建显示过程创建静态库编译时相关文件查找顺序头文件顺序中以为例编译时首先检索文件的当前路径如果没有再检索标准路径先搜索当前目录然后搜索指定的目录再搜索的环境变量程序使用的是最后搜索的内定目录即上述的标准路径库文件顺序可以查看基础以及系统编程如何查找动态库基础以及系统编程页面中的如何查找动态库部分调试器是一个用来调试程序的功能强大的调试器是系统开发最常用的调试器程序员可以使用来跟踪程序中的错误从而减少程序员的工作量开发一定要熟悉是通过调用调试器来实现的调试工作的系统中常用的集成开发环境如等它们内部已经嵌套了相应的调试器调试器只适合单线程程序调试多线程调试还是使用日志打印方式更靠谱主要功能设置断点断点可以是条件表达式使程序在指定的代码行上暂停执行便于观察单步执行程序便于调试查看程序中变量值的变化动态改变程序的执行环境分析崩溃程序产生的文件如何设置开启文件的产生常用调试命令参数调试开始执行进入调试程序其中为要调试的可执行文件名文件可以用于分析查看错误产生的位置等信息以下命令后括号内为命令的简化使用比如直接输入命令就代表命令查看命令帮助具体命令查询在中输入命令重新开始运行文件加载文本文件加载二进制文件单步执行运行程序停在第一行执行语句查看源代码查看当前断下位置附近的代码从第行开始查看代码函数名查看具体函数设置变量的值单步调试逐过程函数直接执行单步调试逐语句跳入自定义函数内部执行查看函数的调用的栈帧和层级关系切换函数的栈帧查看函数内部局部变量的数值结束当前函数返回到函数调用点继续运行打印值及地址例如表示打印名为的变量退出在第行设置断点查看当前设置的所有断点删除第个断点追踪查看具体变量值取消追踪观察变量被设置观察点的变量发生修改时打印显示显示观察点启用断点禁用断点查看内存显示个单元进制字节每单元调试时命令行传参项目管理选择跟踪父子进程编译程序时需要加上之后才能用进行调试如果不加将看不见程序的函数名变量名所代替的全是运行时的内存地址回车键重复上一命令显示代码命令详解简写打印第行的上下文内容显示函数名为的函数的源程序显示当前行后面的源程序显示当前文件开始处的源程序显示文件下第行显示文件的函数名为的函数的源程序一般是打印当前行的上行和下行如果显示函数是是上行下行默认是行当然你也可以定制显示的范围使用下面命令可以设置一次显示源程序的行数设置一次显示源代码的行数查看当前的设置设置断点命令详解简写简单断点当前文件在源程序第行设置断点设置断点在函数入口处多文件设置断点在源文件的行处停止在源文件的函数的入口处停止查询所有断点可简写为所以可以直接写条件断点关键词后跟断点条件如维护断点删除指定的断点其简写命令为如果不指定断点号则表示删除所有的断点表示断点号的范围如删除某个断点删除多个断点删除连续的多个断点删除所有断点比删除更好的一种方法是停止点了的停止点不会删除当你还需要时即可就好像回收站一样使指定断点无效简写命令是如果什么都不指定表示所有的停止点使一个断点无效有效使多个断点无效有效使多个连续的断点无效有效使所有断点无效有效使无效断点生效简写命令是如果什么都不指定表示所有的停止点使一个断点无效有效使多个断点无效有效使多个连续的断点无效有效使所有断点无效有效调试代码运行程序运行程序停在第一行执行语句单步步过单步步入退出进入的函数在一个循环体内单步跟踪时该命令可以运行程序直到退出循环体继续运行程序若有断点则跳到下一个断点显示运行中信息变量名变量变量的地址查看运行时变量的值自动显示变量的值你可以设置一些自动显示的变量当程序停住时或是在你单步跟踪时这些变量会自动显示相关的命令是变量名查看设置的自动显示的信息时显示的编号或删除自动显示意为所设置好了的自动显式的编号如果要同时删除几个编号可以用空格分隔如果要删除一个范围内的编号可以用减号表示如删除某个自动显示或者删除多个删除一个范围使一个自动显示无效使多个自动显示无效使一个范围的自动显示无效使一个自动显示有效使多个自动显示有效使一个范围的自动显示有效和不删除自动显示的设置而只是让其失效和恢复查看变量的类型查看变量的类型改变变量的值可以使用命令来告诉不是你的参数而是程序的变量名如在你改变程序变量取值时最好都使用格式的命令基本格式目标依赖命令必须是不能是空格目标要生成的目标依赖目标文件由哪些文件生成命令通过执行该命令由依赖文件生成目标目标依赖命令注意每条命令前必须有且仅有一个保持缩进这是语法要求此处要注意编写的话要把键切换成空格给关掉命令文件默认只生成第一个目标文件即完成编译但是我们可以通过指定需要生成的目标文件通常会把也设置为伪目标文件中开头的表示他是命令命令开头有一些可选项可填入开头加上表示该命令执行的时候不显示命令本身开头加上表示该命令执行失败也依然会执行后续命令最基础的文件当前目录下有目标文件依赖文件表示添加某个库因为使用到了库工作流程文件主要包含了部分内容显示规则说明了如何生成一个或多个目标文件由文件的创作者指出包括要生成的文件文件的依赖文件生成的命令隐式规则由于有自动推导的功能所以隐式的规则可以比较粗糙地简略书写文件这是由所支持的变量定义在文件中要定义一系列的变量变量一般都是字符串这与语言中的宏有些类似当文件执行时其中的变量都会扩展到相应的引用上文件指示其中包含个部分在一个文件中引用另一个文件根据某些情况指定文件中的有效部分定义一个多行的命令注释文件中只有行注释其注释用字符如果要在文件中使用字符可以用反斜框进行转义如中的变量类似于语言的宏定义如下面是变量的定义和使用定义变量并赋值使用变量变量名主要有以下种系统自带变量手动定义变量传递变量自动推理参数设置的很强大它可以自动推导文件以及文件依赖关系后面的命令于是我们就没必要去在每一个文件后都写上类似的命令因为我们的会自动识别并自己推导命令只要看到一个文件它就会自动的把文件加在依赖关系中如果找到一个那么就会是的依赖文件并且也会被推导出来正是因为强大的自动推导功能因此依赖项写成文件后就可以一条命令搞定整个编译过程中常见预定义变量表示头文件的路径在当前源文件的父文件夹中的文件夹中在中变量的用法变量名自动变量自动变量下面表格的变量只能在规则中的命令使用是目标文件的目录是目标文件手动定义变量的方法变量名存的值仅第一次有效变量名存的值已经定义了变量修改用这个生成的目标文件名依赖文件自己写的依赖文件加入的头文件头文件所在目录目标项依赖项目标项标识伪目标生成动态库生成的目标文件名依赖文件自己写的依赖文件加入的头文件头文件所在目录目标项标识伪目标联合动态库编译文件生成的目标文件名依赖文件自己写的头文件所在目录库文件所在路径具体引用了哪些库目标项标识伪目标上面所有案例都有个问题一旦新增源文件就要修改有没有一劳永逸的方法不需要修改就能适应呢模式规则要求至少在规则的目标定义中要包含表示一个或多个在依赖条件中同样可以使用依赖条件中的取值取决于其目标如下的清理操作用途清除编译生成的中间文件和最终目标文件命令同于执行此操作但是如果当前目录下有同名文件则不执行对应的命令解决方案是伪目标声明声明目标为伪目标之后将不会检查该目标是否存在或者该目标是否需要更新不检查直接调用对应的命令强制执行比如若要删除的文件不存在使用不会报错命令中的特殊符号表示即使此条命令出错也会继续执行后续的命令如不显示命令本身只显示结果如注意这样的路径在的命令中不可使用取而代之可以这样命令的参数默认执行第一个出现的目标可通过表示其他目标指定要执行的目标文件名制定一个文件来执行如指定要执行的文件名为在测试时应先使用参数检查无误再执行只显示命令但不真正执行的常见函数所有函数都有返回值函数当前目录下匹配模式的文件例如函数去除路径例如函数模式匹配替换例如等价于意思是把的所有后缀的文件名换成后缀文件函数执行命令例如生成的目标文件名可以设定库可以直接加在这句中如下库表示调试也可以加在这句中依赖文件自己写的上面与下面同理下面的可以遍历所有子目录中的依赖文件加入的头文件头文件所在目录目标项依赖项目标项标识伪目标到这里中只在需要添加新的库的时候在后面添加链接库别人项目中的编写参考这个文件可以用来编译和链接一些测试程序例如等您可以运行来编译所有程序运行来安装所有程序运行来清理所有生成的文件学习是一个开源的跨平台自动化构建系统用来管理软件构建的过程不依赖于某特定编译器可以支持多层目录多个应用程序和多个函数库它用配置文件控制构建过程的方式和的相似只是的配置文件取名为并不直接构建出最终的软件而是产生标准的构建文件如的或的然后再依一般的构建方式使用是一个跨平台的安装编译工具可以用简单的语句来描述所有平台的安装编译过程可以说已经成为大部分开源项目标配事实标准语法特性介绍基本语法格式指令参数参数参数使用括弧括起参数之间使用空格或分号分开指令是大小写无关的参数和变量是大小写相关的变量使用方式取值但是在控制语句中是直接使用变量名重要指令指定的最小版本要求语法最小版本要求为定义工程名称并可指定工程支持的语言语法指定工程名为显式的定义变量语法定义变量其值为向工程添加多个特定的头文件搜索路径相当于指定编译器的参数要放在前面语法将和添加到头文件搜索路径向工程添加多个特定的库文件搜索路径相当于指定编译器的参数要放在前面语法将和添加到库文件搜索路径下会自动解析路径下的或目录生成库文件语法通过变量生成共享库表示动态库表示静态库添加编译参数语法添加编译参数生成可执行文件语法编译生成可执行文件为添加需要链接的共享库相当于指定编译器参数放在后面语法将动态库文件链接到可执行文件此处无论是中不需要写前面的和后面的后缀向当前工程添加存放源文件的子目录并可以指定中间二进制和目标二进制存放的位置语法添加子目录中需有一个发现一个目录下所有的源文件并将列表存储在一个变量中这个指令临时被用来自动构建源文件列表多个该指令可以累加找到的源文件到变量中语法定义变量其值为当前目录下所有的源代码文件编译变量所代表的的源代码文件生成可执行文件自动查找头文件可以通过下面命令实现含义为将匹配的文件放到变量中用于向编译器添加预处理器定义语法传递宏给项目宏的默认值为常用变量编译选项编译选项在编译选项后追加编译类型设定编译类型为调试时需要选择设定编译类型为调试时需要选择这三个变量指代的内容是一致的如果是指的就是工程顶层目录如果是编译指的是工程编译发生的目录跟其他指令稍有区别不过现在你可以理解为他们是一致的这三个变量指代的内容是一致的不论采用何种编译方式都是工程顶层目录也就是在时他跟等变量一致跟其他指令稍有区别不过现在你可以理解为他们是一致的指定编译器指定编译器可执行文件输出的存放路径库文件输出的存放路径开关显示详细的生成指令当前正在执行的文件所在的目录的路径编译工程目录结构项目主目录存在一个文件两种方式设置编译规则包含源文件的子文件夹包含文件主目录的通过添加子目录即可包含源文件的子文件夹未包含文件子目录编译规则体现在主目录的中编译流程手动编写执行命令生成是顶层所在的目录执行命令进行编译有一个叫的拓展可以支持智能补全指令与直接生成模板文件是让支持的插件插件两种构建方式内部构建不推荐使用内部构建会在同级目录下产生一大堆中间文件这些中间文件并不是我们最终所需要的和工程源文件放在一起会显得杂乱无章内部构建在当前目录下编译本目录的生成和其他文件执行命令生成外部构建推荐使用将编译输出文件与源文件放到不同目录中外部构建在当前目录下创建文件夹进入到文件夹一般默认该文件夹都叫编译上级目录的生成和其他文件也可以在上级目录的情况下直接执行命令生成实战代码实践最小的工程内部构建后还未执行如图红色框中是原有的文件紫色框中的是内部构建生成的可以看到非常乱外部构建后还未执行如图的产物都放到文件夹下了整洁了很多如果之后执行生成的可执行文件也会在文件夹下多目录工程直接编译项目结构如下如下操作如下后结构如下下面两个等同于在上级目录配置项目构建项目配合进行调试合理设置项目目录编写项目源文件编写构建项目编译规则使用外部构建手动编译项目配置的文件并调试项目编写如下添加支持及其他选项调成模式选项意思是编译后显示所有警告在这一级别将会提供所有支持的优化但这其中并不包括以空间换时间的优化手段例如编译器不会使用循环展开和函数内联和相比该选项进一步加快了编译时间和生成代码的性能点击下面图片位置创建文件超级重点必须在编辑框显示源文件的情况下点击这个按钮用来解决不支持调试问题在更新到后不再支持调试即无效因此下载插件也因此上图选择按钮红框中设置为生成的可执行文件的路径然后直接按就可以调试运行如果想每次调试前自动编译项目可以配合在文件夹下新建文件将下面复制进去上面文件就相当于每次调试前执行如下代码相当于在这个路径下执行如下代码这样的好处在于每次调试前保证调试的是最新的可执行文件进阶在使用组织工程时如果我们需要依赖某个库文件需要完成以下步骤查找库文件命令判断是否找到库文件标记并包含头文件命令链接库文件到目标命令例如查找是否安装找到宏已打开找到现代现代的完全体版本及以上终端指令学习基本指令功能前往文件夹取得目前所在路径查看当前目录的文件和文件夹新建文件夹无指令新建文件复制文件移动文件删除文件清除画面上的显示部分特殊终端命令常用命令安装软件卸载软件搜索软件更新软件查看列表更新清理所有包的旧版本清理指定包的旧版本查看可清理的旧版本包不执行实际操作查看包的详细信息检查所有服务状态启动服务停止服务重启服务查看某个软件的安装路径删除所有未使用的依赖加可以预先确定哪些软件将会被清理这个命令会将仓库克隆到本地机器上的一个特定目录中通常是之后会在这个仓库中查找软件包是的一个命令用于添加额外的软件包源也称为默认情况下只包含其主仓库这个仓库里包含了大量常用的软件包但是用户可能需要安装一些不在主仓库中的软件包这时就可以使用命令来添加一个新的源取消如果你不再需要某个可以使用命令来移除它是一个非常有用的特性让用户能够轻松地扩展的软件库安装和管理广泛的第三方软件包浅克隆问题浅克隆问题指的是在安装或更新时为了节省时间和带宽通常会创建一个所谓的浅克隆的仓库浅克隆只包含最近的提交记录而不是整个仓库的历史记录这通常足够正常工作因为大多数用户只关心最新的包版本然而对于浅克隆的更新操作提出了性能问题因为浅克隆需要在服务器端进行更多的计算来确定要发送哪些数据给客户端当大量用户进行浅克隆的更新时这将对服务器产生很大的负担因此在的请求下引入了一个限制要求用户在更新浅克隆的仓库之前先将其转换为完整克隆完整克隆包含了仓库的完整提交历史虽然它需要更多的磁盘空间和更长的初始克隆时间但之后的更新操作会更简单对的服务器负载也更小你可以通过执行以下命令将的浅克隆转换为完整克隆终端命令相关基本指令参考终端命令重命名终端输入查对应终端的配置文件所在没有就自行新建打开文件输入格式别名需要替代的命令可以包含空格或者名称需要替代的命令可以包含空格别名名称如保存后重启就可以使用别名了新建文件命令基本指令大多与一致但无命令新建文件名工具命令远程连接用户名地址或域名从服务器上下载文件本地目录加上的参数才可以传目录例如把上的的文件下载到本地目录上传本地文件到服务器例如把本机目录下的文件上传到这台服务器上的目录中如果上传下载的是整个目录后加某些较新的系统命令默认使用协议来传输文件但老系统却不支持此时使用使得变回传统传输行为使用和类似但功能更多比如支持断点续传则不能代码调试打断点集成开发环境适用于有调试终端的情况写日志当应用程序没有终端的时候此处记录一个小技巧跟踪显示日志打印以跟踪打印最后行为例应用程序发布了通过日志文件记录程序的工作状态写日志有级别级别越低写的日志越多级别越高写的日志越少相关在用调试的时候若看到无法解析的外部符号就是没有函数的实现应该是没有连接到库各跳出括号方法开发项目新建项目跨平台空项目远程开发工具选项跨平台连接管理器添加主机名填写端口填写用户名与密码连接项目属性页配置属性常规中远程生成计算机选择上面添加的远程生成根目录远程生成项目目录远程开发安装插件安装后打开远程资源管理器设置为点击号键添加目标右键目标选择连接输入密码开始远程开发更细节的操作参考可以配合给配置给配置配置调试编译的时候需要加选项才会附带调试需要的信息点击左侧菜单栏中的运行和调试中的创建文件按钮如下图非红圈点击后会在项目根目录下生成文件配置默认运行是在输出端是不能进行编辑输入的所以我们要将其改到终端运行打开设置找到配置处将其勾选住也可在设置的配置文件文件里添加配置保存我们再通过运行就可以在终端中运行了可以在上面进行输入了下的终端乱码下乱码最简单的方式是设置通过的方式保存如果不行再参考下面的方式解决默认是编码而在中国地区下的的默认是编码因此需要配置终端为编码通过命令查看代码页编号对应对应文件首选项设置点击右上角打开设置添加如下代码将以上配置添加在里最外层的里即可注意如果里之前有内容记得要在最后一行加上一个英文逗号之后再把配置复制进去更好的方法是修改程序的变量这个会修改的运行环境代码如下或者因为修改变量修改的是的运行环境并不会修改系统函数的环境所以如果调用系统函数函数还是会出现乱码上有些库例如会调用函数设置的还是会出现乱码还需要设置控制台编码更详细完整的说法参阅的配置文件安装并配置好插件后编译的话配置它可以定义一系列的任务包括编译运行测试等以便在开发过程中快速执行这些任务调试启动的话配置它是用于调试的配置文件使用插件插件配合可以实现一键使用启动程序的作用终端配置任务生成文件下面为用配置的任务单文件生成任务此处为需要编译的源文件编译器配置好以后使用终端运行生成任务来调用该配置的任务运行添加配置生成文件生成的文件中可以进一步点击添加配置按钮生成小模版参考如下使用了解相关属性悬停以查看现有属性的描述生成和调试活动文件配置名称将会在启动配置的下拉菜单中显示配置类型这里只能为请求配置类型可以为启动或附加将要进行调试的程序的路径程序调试时传递给程序的命令行参数一般设为空即可设为时程序将暂停在程序入口处我一般设置为调试程序时的工作目录环境变量调试时是否显示控制台窗口一般设置为显示控制台指定连接的调试器可以为或但目前在下没有预编译好的版本用处未知模板如此为启用整齐打印将反汇编风格设置为调试会话开始前执行的任务一般为编译程序与的相对应调试器路径下后缀不能省略下则去掉其他配置文件细节参考跳转参考案例上的案例启动设置好后点击调试按钮进行调试文件是中用于配置插件的重要文件它主要用于针对特定项目设置包含头文件的路径设置支持的版本号等一般情况下文件位于中项目的文件夹中如果你的项目中没有这个文件你可以通过以下步骤来创建它在中打开命令面板快捷键是输入并选择命令如果使用的插件可以自动处理包含路径和定义因此不需要手动配置文件常用配置项用来指定头文件搜索路径的当你在编写代码时编译器会在指定的路径中查找你引用的头文件这样编译器就能找到并正确地解析对应的头文件此外还有助于实现代码的自动补全功能你在写代码的时候会根据中的路径去找头文件这样就可以使用自动补全功能而且不会有下划线警告你想要设置的版本号例如或官方配置文档插件设置技巧显示所有命令查找可以查看默认的配置文件可以根据需要来定制进行环境的迁移插件插件的目的是为了编写的时候有智能提示而插件是让和进行集成更方便操作插件会在启动项目的时候检测是否存在存在才启动该插件的功能因此新建的被创建后要重启项目如果需要使用该插件来调试的话需要配合使用需要修改的代码如下其实就是调用了插件提供的一个命令该命令的作用是编译好后返回生成的可执行程序的路径使用集成终端添加接下来就可以通过来调试项目了也可以使用底部的运行和调试按钮插件可以通过自动配置的代码提示如果的代码提示不正确可以手动执行命令然后选择使用就可以使代码提示和同步插件插件代码一多提示就太慢了并且偶尔崩溃使用插件替代二者都是智能提示插件互相冲突当需要配置智能提示的头文件时在项目目录的下新建文件来添加编译选项智能提示会依据这些编译选项来提示配置完成后要重启或者才能生效插件需要下文件夹生成的文件来指导智能提示如果是项目可以使用安装命令来生成如果是基于其他方式可以使用项目中的方式来生成对应的文件插件代码格式化工具基于的代码解析能力可以根据预定义的代码样式规范自动调整代码的缩进换行空格等格式可以在插件的设置中的项中进行配置如下图上图为针对语言的代码格式化设置指定每个缩进级别的空格数默认为指定字符的宽度默认为指定是否使用字符进行缩进默认为即使用空格进行缩进指定在行尾继续缩进的空格数默认为功能拓展可以按一下直接从括号或引号中跳出无需按方向键或键功能非常强大甚至能显示代码部分是谁在什么时候做的修改拓展地址文件路径跳转插件插件插件新建头文件时自动包含防重复包含的编译选项插件主页插件新建基于的项目文件插件主页调试可视化还未完全支持插件主页使用命令行里输入变量名翻译上快捷键双击翻译成中文翻译成英文自动补分号自动补分号光标停在末尾自动补分号光标停在新行处单元测试插件可以支持的插件容器开发支持主要是两个插件插件插件插件使用扩展可以非常方便的从构建管理和部署容器化应用程序主要功能如下自动生成和文件按并搜索将文件添加到包含了构建容器的指令而文件则用于定义多个容器之间的关系和配置语法突出高亮显示以及和文件的智能提示悬停提示语法检查和分析会提示警告或错误集成最常见的命令例如等需按唤起镜像容器管理对的支持这块我们就不具体介绍了程序调试支持连接插件允许使用容器作为完整功能的开发环境提供一致易于复制的工具链和隔离的开发环境使用的方式可以通过多种方式在中使用包括本地安装远程环境安装以及使用其他符合标准的工作原理扩展会启动或附加到运行着定义良好的工具和运行时堆栈的开发容器将工作区文件从本地文件系统挂载到容器中并在容器内安装和运行扩展常配合插件使用连接容器开发环境标准化代码悬浮翻译插件可以自由拆分组合词翻译鼠标悬浮翻译快速代码中单词翻译的终极解决方法日志文件高亮显示插件排列整齐高亮显示自动生成和函数要自己试一下才知道哪个最适合自己一键复制文件给等结合使用插件利用密钥可以一键生成注释可视化文件插件记录时还未上架插件市场使用方式后输入命令断点映射到浏览器预览当前应用的代码下载地址将显示直接显示到代码右侧下载地址拼写检查蓝线标识拼写错误下载地址代码书签插件下载地址可以给代码打书签注释中的高亮插件可以将注释中的高亮显示下载地址粘贴变为类下载地址相关插件盘点从代码生成类图这是一个命令行工具但有配套的插件可以使用开源地址配置开发团队资源管理器团队管理器是一种基于的即命令都是由去执行的而只负责将界面的操作转换成对应的命令行发送给直接作为一个管理器嵌入在中在单个组件中搜索安装两个组件的扩展需要浏览器支持本质是在浏览器安装了个插件装好后可以直接在打开该界面手动打开项目主页介绍详情参考更改这是你对代码进行的修改当你在中修改了代码后这些更改会在更改区域中显示出来你可以查看你的更改然后提交这些更改到本地的仓库对应的命令是分支在中分支是用来隔离你的工作环境的让你可以在不影响其他分支的情况下进行开发你可以创建新的分支进行开发完成后再将其合并回主分支对应的命令是来创建新的分支来切换分支来合并分支拉取请求这是一种在团队中协作开发的方式你可以在自己的分支上进行开发然后通过创建拉取请求来请求将你的更改合并到主分支这也是一种代码审查的方式可以让团队成员在合并前对你的更改进行审查对应的命令是来拉取最新的更改同步这是将你的本地仓库与远程仓库进行同步的操作你可以拉取远程仓库的最新更改到你的本地仓库也可以将你的更改推送到远程仓库对应的命令是来拉取最新的更改来推送你的更改标记在中标记通常用于标记某个重要的提交点如版本发布等对应的命令是来创建新的标签点击分支右键某分支可以选择查看历史记录打开的窗口能看到详细的时间点流程图相关设置可以设置分隔符类似的从中剔除可以选中整个分割的名称设置为关闭单目录层级融合设置为禁止代码拖放设置为用空格替代对各种编译器兼容性有好处将其设置为这样在按下回车键时就不会选择匹配项了还是好设置是否在保存的时候自动格式化代码相关设置入门开发环境相关参考此处笔记给配置如果在启用或关闭功能中没有看到服务器端的选项的话可以自行安装遵循一下步骤以管理员启动先查看是否已安装安装安装客户端安装服务器安装好后的配置设置服务自动启动确保防火墙允许端口的入站连接若规则丢失或被禁用可以创建新规则可选如果要修改配置如设置用户访问权限可以编辑配置文件编辑完成后保存并关闭记事本重启服务上述方法不行的话还可以通过到上下载方式来安装远程连接的用户名是下的用户名之一默认是注意要是激活电脑时使用的用户名密码为开机密码这样能确保权限够高能安装上服务端配合远程开发使用代理相关代理模式系统代理将数据交给本地服务的系统代理可以判断得到是链接发起请求由于其处于灰色地带正规途径有需要因此会放行但特殊时期可能阻断问题并非所有软件都遵循系统代理除去浏览器绝大部分软件都不会走系统代理甚至连设置代理的地方都没有行为完全取决于软件开发者并且系统代理一般都是代理而非代理不支持游戏等流量无法代理代理最常用使用虚拟网卡接管系统全局流量的代理主流模式手机默认就是这种模式软路由接管全家科学上网也是同样的原理称为透明代理问题我们使用的等主流的翻墙协议都无法封装网络层的数据包比如模式谷歌的话返回假延迟因为上述协议无法代理网络层的协议真代理能封装网络层数据包只有能封装网络层数据包才能实现异地组网内网穿透才能称为真正的软件一般是用可以正常外网地址问题并非为翻墙而生只是对数据进行加密顺便实现了翻墙功能他的流量清晰明了地写着它就是的流量而且分流很不方便因此不推荐用来科学上网协议减少重放攻击协议带伪装插件的协议协议泄露使用了规则进行分流的情况下访问谷歌之前必须先得到谷歌的地址于是发起请求如果是明文的那么当你要到谷歌的时候马上给其他服务器发了一堆加密数据该行为特征鬼都知道你在干啥再比如网飞客户端偷偷发一个请求权威服务器记载的这个请求的上游服务器所在地就会和代理服务器的上游服务器所在地不是一个地区以此判定你在使用工具泄露的本质原因在代理的情况下本地发出了请求而这可能仅仅是为了获得匹配规则中的分流规则实际上真正的解析依旧会在远程代理服务器上进行解决方案模式当我们使用模式时运行在路由器上浏览器请求解析解析请求被截获立刻返回一个给浏览器浏览器根据发起连接请求被拦截根据在自己的映射表中反查出域名再用域名去走代理代理服务器解析这样客户端响应速度加快浏览体验更加顺畅减轻网页加载时间过长的情况软件层面分流穿透篇配置文件节点提供者代理组兼容性相关各种平台宏详细参考路径兼容性使用跨平台的库和框架避免使用平台特定万不得已使用条件编译根据不同平台编写不同代码需要注意的是使用条件编译也存在一些缺点例如代码可读性较差维护成本较高容易引入错误等因此应该谨慎使用条件编译使用跨平台的编译器等等路径兼容性例如使用库方案使用库中的来保证路径操作在不同平台上的一致性在多线程编程中可以使用库中的线程互斥锁和条件变量等组件来保证多线程代码在不同平台上的可移植性交叉编译构建机平台目标机平台本机编译顾名思义就是本机编译的程序或者动态在本机上运行也可以在同平台的机器上运行这里不做过多赘述这个很好理解要编译的程序或者动态库依赖的一些头文件或者库文件就在本机系统上或在默认目录以为例等另外也可以通过人工指定的方式例如中可以通过关键字或者等指定库文件路径和头文件路径等指明依赖的头文件和库文件位置基于的工作流程设计软件开发阶段每一个从点子开始的项目通常来源于一次闲聊在这个阶段集成了最有效的讨论一个点子的方法就是为这个点子建立一个工单讨论你的团队和你的合作伙伴可以在工单追踪器中帮助你去提升这个点子一旦讨论得到一致的同意就是开始编码的时候了但是等等首先我们需要优先考虑组织我们的工作流对于此我们可以使用工单看板现在当一切准备就绪我们可以开始写代码了当我们为我们的初步成果欢呼的时候我们就可以在版本控制下提交代码到功能分支了通过我们可以运行脚本来构建和测试我们的应用一旦脚本成功运行我们测试和构建成功我们就可以进行代码复审以及批准现在是时候将我们的代码部署到演示环境来检查一下看看是否一切就像我们预估的那样顺畅或者我们可能仍然需要修改当一切都如预期就是部署到生产环境的时候了现在是时候返回去看我们项目中需要提升的部分了我们使用周期分析来对当前项目中关键的部分进行的反馈转译转译运行命令行程序如下进入转译模式终端进入后在该终端执行的所有命令会默认以开头可以使用或判断当前架构如果返回或表明已经进入转译模式如果要单独执行的命令在转译模式下只需要在前面添加即可从支持开始推荐在处理器的上使用作为安装路径在处理器架构设计的默认安装路径上部署开发环境优势在或上获得开发环境针对系列芯片的已经完全适配文件访问使用挂载方式可以保证文件共享与系统之间文件访问没有障碍资源消耗外网访问基于进行开发下环境的开发环境带的下环境的开发环境带的上使用该环境会运行在上安装好两个镜像后配置或此处附带一个微软官方的开发环境镜像其内还支持该镜像链接配置示例注意一定要一直开着才能连接进行开发除了和都是使用配置运行效果这段代码在不同环境下的运行结果下下下使用相关工具盘点步骤使用在容器中使用查看位置将可执行文件位置拷贝到的设置构建执行部署动态分析工具创建容器的目的仅仅是获知的可执行文件的地址填入因为实际上会自动启用无名的临时容器无法进入终端接下来只需要点击下图所选项即可使用开发环境的插件针对镜像可以右键选择附加将会打开一个在中的在中打开的没有任何插件需要重新为中的安装使用会更简单一些可以轻松配置一些需要用到的环境使用开发流程详情可点击参考已经存在容器运行一个开发容器同时将现在的目录挂载到容器内路径开发镜像名在中将看到在运行的容器点击附加到容器在新打开的中到路径下工作还需要为重新安装相关拓展自带的开发容器也可以直接使用拓展中的新的开发容器选项创建一个容器默认自带了常用开发套件包括在上自动生成的容器需要更改文件内容如下因为是架构其他视图固化的指令修改也可以通过类似操作实现新增块目的是相当于执行了但重启不会生效或相当于添加了添加后会询问是否重建容器这样的好处是拓展帮我们自行进行映射安装的东西项目文件夹中的所有改动以及安装的拓展都会帮我们映射到相应的卷中非常方便如果连接的是远程主机上的需要先通过连接到远程主机再使用插件或插件连接到远程主机上的但是连接到远程主机上的会没有用户权限发现无法连接需要将登陆用户添加到用户组中当前登录用户名从用户组中删除当前登录用户名重启远程服务器即可使用改动的过程中频繁需要输入密码可以通过方式免掉这些输入密码的操作先生成公私密钥对生成与放置的位置以和为例用户名用户用户名将公钥后缀文件放到远程服务器的这个路径即生效不生效的话重启远程服务器环境变量配置在上双击启动应用程序和在命令行中执行有以下几个主要区别双击启动的是通过来管理和启动应用程序的不会读取或用户的环境配置命令行启动通过命令行启动时应用程序的进程是由当前出来的所以它能继承当前的环境变量配置相比于使用配置环境变量使用下面来配置可以同时作用于双击启动和命令行启动允许任何来源访问端口取消设置使用上的虚拟机方案一键运行纯命令行操作不占资源上可以使用',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-01-22 09:09:27',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://th.bing.com/th/id/OIP.wtmjepfWPBvn26uz7s18dgHaHa?rs=1&amp;pid=ImgDetMain"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><a id="site-name" href="/" accesskey="h"><div class="title">ZEROKO14的个人博客</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> 搜索</span></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" alt="微信" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/C/" style="font-size: 1.05rem;">C#<sup>2</sup></a><a href="/tags/C/" style="font-size: 1.05rem;">C++<sup>5</sup></a><a href="/tags/CSS/" style="font-size: 1.05rem;">CSS<sup>1</sup></a><a href="/tags/CSharp/" style="font-size: 1.05rem;">CSharp<sup>1</sup></a><a href="/tags/C%E8%AF%AD%E8%A8%80/" style="font-size: 1.05rem;">C语言<sup>1</sup></a><a href="/tags/FPS/" style="font-size: 1.05rem;">FPS<sup>1</sup></a><a href="/tags/HTML/" style="font-size: 1.05rem;">HTML<sup>1</sup></a><a href="/tags/JavaScript/" style="font-size: 1.05rem;">JavaScript<sup>1</sup></a><a href="/tags/MFC/" style="font-size: 1.05rem;">MFC<sup>1</sup></a><a href="/tags/PE/" style="font-size: 1.05rem;">PE<sup>1</sup></a><a href="/tags/QT/" style="font-size: 1.05rem;">QT<sup>1</sup></a><a href="/tags/WPF/" style="font-size: 1.05rem;">WPF<sup>2</sup></a><a href="/tags/ai/" style="font-size: 1.05rem;">ai<sup>1</sup></a><a href="/tags/cmake/" style="font-size: 1.05rem;">cmake<sup>1</sup></a><a href="/tags/doxygen/" style="font-size: 1.05rem;">doxygen<sup>1</sup></a><a href="/tags/git/" style="font-size: 1.05rem;">git<sup>1</sup></a><a href="/tags/json/" style="font-size: 1.05rem;">json<sup>1</sup></a><a href="/tags/linux/" style="font-size: 1.05rem;">linux<sup>1</sup></a><a href="/tags/nas/" style="font-size: 1.05rem;">nas<sup>1</sup></a><a href="/tags/next/" style="font-size: 1.05rem;">next<sup>1</sup></a><a href="/tags/ppt/" style="font-size: 1.05rem;">ppt<sup>1</sup></a><a href="/tags/slidev/" style="font-size: 1.05rem;">slidev<sup>1</sup></a><a href="/tags/vue/" style="font-size: 1.05rem;">vue<sup>1</sup></a><a href="/tags/xml/" style="font-size: 1.05rem;">xml<sup>1</sup></a><a href="/tags/yaml/" style="font-size: 1.05rem;">yaml<sup>1</sup></a><a href="/tags/%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83/" style="font-size: 1.05rem;">代码规范<sup>1</sup></a><a href="/tags/%E5%86%85%E6%A0%B8/" style="font-size: 1.05rem;">内核<sup>2</sup></a><a href="/tags/%E5%86%85%E6%A0%B8%E7%9B%B8%E5%85%B3/" style="font-size: 1.05rem;">内核相关<sup>5</sup></a><a href="/tags/%E5%8A%A0%E8%A7%A3%E5%AF%86/" style="font-size: 1.05rem;">加解密<sup>1</sup></a><a href="/tags/%E5%9F%BA%E7%A1%80/" style="font-size: 1.05rem;">基础<sup>2</sup></a><a href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" style="font-size: 1.05rem;">多线程<sup>1</sup></a><a href="/tags/%E5%B9%B6%E5%8F%91%E6%A8%A1%E5%BC%8F/" style="font-size: 1.05rem;">并发模式<sup>1</sup></a><a href="/tags/%E5%BC%80%E5%8F%91/" style="font-size: 1.05rem;">开发<sup>4</sup></a><a href="/tags/%E6%95%B0%E5%AD%A6/" style="font-size: 1.05rem;">数学<sup>1</sup></a><a href="/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" style="font-size: 1.05rem;">正则表达式<sup>1</sup></a><a href="/tags/%E7%9B%91%E6%8E%A7/" style="font-size: 1.05rem;">监控<sup>1</sup></a><a href="/tags/%E7%A1%AC%E7%BC%96%E7%A0%81/" style="font-size: 1.05rem;">硬编码<sup>1</sup></a><a href="/tags/%E7%AE%A1%E7%90%86/" style="font-size: 1.05rem;">管理<sup>1</sup></a><a href="/tags/%E7%BD%91%E7%BB%9C/" style="font-size: 1.05rem;">网络<sup>3</sup></a><a href="/tags/%E9%80%86%E5%90%91/" style="font-size: 1.05rem;">逆向<sup>2</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="anzhiyufont anzhiyu-icon-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/02/"><span class="card-archive-list-date">二月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/12/"><span class="card-archive-list-date">十二月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/11/"><span class="card-archive-list-date">十一月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/09/"><span class="card-archive-list-date">九月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/07/"><span class="card-archive-list-date">七月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">14</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/06/"><span class="card-archive-list-date">六月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">4</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/04/"><span class="card-archive-list-date">四月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/11/"><span class="card-archive-list-date">十一月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">27</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="url">技术</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/C/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>C++</span></a></span></div></div><h1 class="post-title" itemprop="name headline">mac及linux C++环境配置</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2024-07-16T04:06:28.958Z" title="发表于 2024-07-16 12:06:28">2024-07-16</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2025-01-22T01:09:27.198Z" title="更新于 2025-01-22 09:09:27">2025-01-22</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-pv-cv" id="" data-flag-title="mac及linux C++环境配置"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="busuanzi_value_page_pv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为新加坡"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>新加坡</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src=""></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="https://che77a38.github.io/posts/mac%E5%8F%8Alinux_C++%E7%8E%AF%E5%A2%83/"><header><a class="post-meta-categories" href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="url">技术</a><a href="/tags/C/" tabindex="-1" itemprop="url">C++</a><h1 id="CrawlerTitle" itemprop="name headline">mac及linux C++环境配置</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">ZEROKO14</span><time itemprop="dateCreated datePublished" datetime="2024-07-16T04:06:28.958Z" title="发表于 2024-07-16 12:06:28">2024-07-16</time><time itemprop="dateCreated datePublished" datetime="2025-01-22T01:09:27.198Z" title="更新于 2025-01-22 09:09:27">2025-01-22</time></header><p>mac及linux C++环境配置</p>
<span id="more"></span>

<p><strong>linux系统介绍</strong></p>
<ul>
<li>什么是linux系统？</li>
<li>linux是开源的操作系统</li>
</ul>
<p><strong>多用户多任务</strong></p>
<p>windows属于：单用户，多任务。</p>
<p>Linux属于：多用户，多任务</p>
<h1 id="vscode快捷键"><a href="#vscode快捷键" class="headerlink" title="vscode快捷键"></a>vscode快捷键</h1><table>
<thead>
<tr>
<th>功能</th>
<th>快捷键</th>
</tr>
</thead>
<tbody><tr>
<td>转到文件</td>
<td>command+p</td>
</tr>
<tr>
<td>命令面板</td>
<td>F1</td>
</tr>
<tr>
<td>打开&#x2F;跳转到终端</td>
<td>ctrl+&#96;  或  ctrl+j</td>
</tr>
<tr>
<td>变量统一重命名</td>
<td>F2</td>
</tr>
<tr>
<td>开关侧边栏</td>
<td>command+b</td>
</tr>
<tr>
<td>转到定义处</td>
<td>F12</td>
</tr>
<tr>
<td>代码格式化</td>
<td>command+K 然后 command+F</td>
</tr>
<tr>
<td>当前行下方插入一行</td>
<td>command+enter</td>
</tr>
<tr>
<td>当前行上方插入一行</td>
<td>command+shift+enter</td>
</tr>
<tr>
<td>定义处缩略图(只看一眼而不跳转过去)</td>
<td>alt+F12</td>
</tr>
<tr>
<td>删除当前行光标右侧所有的字符</td>
<td>command+delete</td>
</tr>
<tr>
<td>多光标同时输入</td>
<td>alt+左键 选多行</td>
</tr>
<tr>
<td>同时选中所有匹配(可以方便修改和添加东西)</td>
<td>command+shift+L</td>
</tr>
<tr>
<td>怕上面命令匹配太多可以逐个匹配</td>
<td>command+d</td>
</tr>
<tr>
<td>回到上一个光标操作</td>
<td>command+U</td>
</tr>
<tr>
<td>整个项目中查找</td>
<td>command+shift+F</td>
</tr>
<tr>
<td>全屏</td>
<td>F11</td>
</tr>
<tr>
<td>字体和窗口大小调整</td>
<td>command+“+&#x2F;-”</td>
</tr>
<tr>
<td>撤销</td>
<td>command+z</td>
</tr>
<tr>
<td>恢复撤销</td>
<td>command+shift+z</td>
</tr>
<tr>
<td>单步步过</td>
<td>F10</td>
</tr>
<tr>
<td>单步步入</td>
<td>F11</td>
</tr>
<tr>
<td>选中当前行</td>
<td>command+L</td>
</tr>
<tr>
<td>返回上一个标签页</td>
<td>ctrl+”-“</td>
</tr>
<tr>
<td>上下移动当前光标的代码</td>
<td>alt+上&#x2F;下</td>
</tr>
<tr>
<td>上下复制当前光标的代码</td>
<td>alt+shift+上下</td>
</tr>
<tr>
<td>折叠代码块</td>
<td>command+k 然后 command+{</td>
</tr>
<tr>
<td>展开代码块</td>
<td>command+k 然后 command+}</td>
</tr>
<tr>
<td>当前代码大纲</td>
<td>command+shift+.</td>
</tr>
<tr>
<td>当前代码大纲2</td>
<td>使用转到文件,然后输入@</td>
</tr>
</tbody></table>
<h1 id="makeFile学习"><a href="#makeFile学习" class="headerlink" title="makeFile学习"></a>makeFile学习</h1><p>ubuntu下的开发环境安装</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">apt-get update #更新安装源</span><br><span class="line">apt-get install g++ #安装gcc和c++的开发库</span><br><span class="line">apt-get install gdb #安装调试工具</span><br><span class="line">apt-get install make</span><br><span class="line">apt-get install openssh-server #远程连接工具</span><br><span class="line">apt-get install vim #编辑工具</span><br></pre></td></tr></table></figure>

<p>安装好开发环境后，当输入make命令时，会在当前目录下找makefile或Makefile文件来执行。</p>
<p><strong>为什么要学习makefile</strong></p>
<ul>
<li>linux下C&#x2F;C++编程 makefile应用广泛</li>
<li>编译移植开源项目，大部分开源项目都基于makefile，学会makefile才能够调试编译过程中的问题</li>
<li>手写makefile太过于繁琐，自动生成的makefile不易于配置，学习本门课程便携自动化makefile，以后新项目只需要include makefile头文件</li>
<li>学习makefile理解大型项目怎么分布编译的</li>
</ul>
<p>目标</p>
<ol>
<li>从零开始学会写第一个makefile编译Linux项目</li>
<li>能够掌握makefile原理，能够灵活应用</li>
<li>学会makefile变量，函数，shell实战方法</li>
<li>学会便携执行程序，动态库，静态库的makefile</li>
<li>学会通过一个makefile编译所有的项目</li>
<li>学会编写安装和卸载makefile</li>
<li>学会使用makefile自动生成启动和停止脚本</li>
</ol>
<h2 id="编译器相关"><a href="#编译器相关" class="headerlink" title="编译器相关"></a>编译器相关</h2><p><strong>什么是编译器</strong></p>
<p>是一个根据源代码生成机器码的程序。</p>
<table>
<thead>
<tr>
<th>厂商</th>
<th>C</th>
<th>C++</th>
<th>Fortran</th>
</tr>
</thead>
<tbody><tr>
<td>GNU</td>
<td>gcc</td>
<td>g++</td>
<td>gfortran</td>
</tr>
<tr>
<td>LLVM</td>
<td>clang</td>
<td>clang++</td>
<td>flang</td>
</tr>
</tbody></table>
<p><strong>一个源代码经过</strong></p>
<ol>
<li>预处理  Preprocessing</li>
<li>编译 Compilation（源码生成汇编语言，针对的是单文件）</li>
<li>汇编 Assembly（汇编语言生成二进制代码，针对的是单文件）</li>
<li>链接 Linking（多文件之间的关系整合起来，找不到就会报错）</li>
<li>运行</li>
</ol>
<ul>
<li>在windows下，链接是找的lib文件，运行时找的dll文件</li>
<li>在linux下，链接和运行找的都是so文件</li>
</ul>
<p><strong>gcc常用选项</strong></p>
<table>
<thead>
<tr>
<th>选项</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>-c</td>
<td>仅对源文件进行编译，不链接生成可执行文件。在对源文件进行查错时，或只需产生目标文件时可以使用该选项</td>
</tr>
<tr>
<td>-g[gdb]</td>
<td>生成调试信息，在可执行文件中加入调试信息，方便进行程序的调试。如果使用中括号中的选项，表示加入gdb拓展的调试信息，方便使用gdb来进行调试</td>
</tr>
<tr>
<td>-o[0或1或2或3或]</td>
<td>对生成的代码使用优化，中括号中的部分为优化级别，缺省的情况为2级优化，0为不进行优化。注意，采用更高级的优化并不一定得到效率更高的代码。</td>
</tr>
<tr>
<td>-Idir</td>
<td>（dir表示具体的路径）在编译源程序时增加一个<strong>搜素头文件的额外目录</strong>–dir，即include增加一个搜索的额外目录（可以设置多个）</td>
</tr>
<tr>
<td>-Ldir</td>
<td>（dir表示具体的路径）在编译源文件时增加一个<strong>搜索库文件(动态库或静态库)的额外目录</strong>–dir（可以设置多个）</td>
</tr>
<tr>
<td>-llibrary</td>
<td>（library表示具体库的名字）在编译链接文件时，增加一个额外的库，库名为liblibrary.so(即此处写的名字是要去前缀和后缀的)</td>
</tr>
<tr>
<td>-w</td>
<td>禁止所有警告</td>
</tr>
<tr>
<td>-Wwarning</td>
<td>（warning表示具体的取值）允许产生warning类型的警告，warning可以是：main，unused等很多取值，最常用是-Wall，表示产生所有警告。如果warning取值为error，其含义是将所有警告作为错误（error)，即出现警告就停止编译。</td>
</tr>
</tbody></table>
<p><strong>gcc编译动态链接库</strong></p>
<ul>
<li>-fPIC 编译选项  产生位置无关代码(PIC),一般创建共享库时用到。在x86上，PIC的代码的符号引用都是通过ebx进行操作的</li>
<li>-shared 产生动态链接库</li>
</ul>
<p>例如</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">g++ -shared -fPIC mylib.cpp -o libmylib.so#编译动态链接库</span><br><span class="line">g++ test.cpp -Imylib -L/root/cpp</span><br></pre></td></tr></table></figure>

<p><strong>静态库编译</strong></p>
<p>linux中的静态库是.a后缀</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ar -crv libmylib.a mylib.o</span><br></pre></td></tr></table></figure>

<p>参数讲解：</p>
<ul>
<li>-c 不显示创建</li>
<li>-v 显示过程</li>
<li>-r 创建静态库</li>
</ul>
<h2 id="编译时相关文件查找顺序"><a href="#编译时相关文件查找顺序" class="headerlink" title="编译时相关文件查找顺序"></a>编译时相关文件查找顺序</h2><p><strong>头文件顺序</strong></p>
<p>Linux中，以<code>include&lt;”fileName.suffix“&gt;</code>为例，编译时：</p>
<p><strong>首先检索文件的当前路径；如果没有，再检索标准路径</strong></p>
<ol>
<li>先搜索当前目录</li>
<li>然后搜索<code>-I</code>指定的目录</li>
<li>再搜索gcc的环境变量<code>CPLUS_INCLUDE_PATH</code>（C程序使用的是<code>C_INCLUDE_PATH</code>）</li>
<li>最后搜索gcc的内定目录(即上述的<strong>标准路径</strong>)</li>
</ol>
<p><strong>库文件顺序</strong></p>
<p>可以查看[[linux基础以及系统编程#Linux如何查找动态库|linux基础以及系统编程页面中的Linux如何查找动态库部分]]</p>
<h2 id="GDB调试器"><a href="#GDB调试器" class="headerlink" title="GDB调试器"></a>GDB调试器</h2><ul>
<li><p>GDB（GUN Debugger）是一个用来调试C&#x2F;C++程序的功能强大的调试器，是LINUX系统开发C&#x2F;C++最常用的调试器</p>
</li>
<li><p>程序员可以使用GDB来跟踪程序中的错误，从而减少程序员的工作量</p>
</li>
<li><p>Linux开发C&#x2F;C++一定要熟悉GDB</p>
</li>
<li><p>VSCode是通过调用GDB调试器来实现C&#x2F;C++的调试工作的</p>
<p>Windows系统中，常用的集成开发环境（IDE),如VS,VC等，它们内部已经嵌套了相应的调试器</p>
</li>
</ul>
<p>GDB调试器只适合单线程程序调试,多线程调试,还是使用日志打印方式更靠谱</p>
<h3 id="GDB主要功能"><a href="#GDB主要功能" class="headerlink" title="GDB主要功能"></a>GDB主要功能</h3><ul>
<li><p>设置断点（断点可以是条件表达式）</p>
</li>
<li><p>使程序在指定的代码行上暂停执行，便于观察</p>
</li>
<li><p>单步执行程序，便于调试</p>
</li>
<li><p>查看程序中变量值的变化</p>
</li>
<li><p>动态改变程序的执行环境</p>
</li>
<li><p>分析崩溃程序产生的core文件</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/lichao201005/article/details/128451612">如何设置开启core文件的产生</a></p>
</li>
</ul>
<h3 id="常用调试命令参数"><a href="#常用调试命令参数" class="headerlink" title="常用调试命令参数"></a>常用调试命令参数</h3><p>调试开始：执行<code>gdb [exefilename]</code>，进入gdb调试程序，其中exefilename为要调试的可执行文件名,<code>gdb [exefilename] [core文件]</code>可以用于分析core,查看错误产生的位置等信息</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##以下命令后括号内为命令的简化使用，比如run(r),直接输入命令r就代表命令run</span></span><br><span class="line"></span><br><span class="line">$(gdb)<span class="built_in">help</span>(h)		<span class="comment">#查看命令帮助，具体命令查询在gdb中输入help+命令</span></span><br><span class="line"></span><br><span class="line">$(gdb)run(r)		<span class="comment">#重新开始运行文件 (run-text:加载文本文件，run-bin:加载二进制文件)</span></span><br><span class="line"></span><br><span class="line">$(gdb)start		  <span class="comment">#单步执行，运行程序，停在第一行执行语句</span></span><br><span class="line"></span><br><span class="line">$(gdb)list(l)		<span class="comment">#查看源代码(list，查看当前断下位置附近的代码 list-n，从第n行开始查看代码，list+函数名：查看具体函数)</span></span><br><span class="line"></span><br><span class="line">$(gdb)<span class="built_in">set</span>				<span class="comment">#设置变量的值</span></span><br><span class="line"></span><br><span class="line">$(gdb)next(n)		<span class="comment">#单步调试（逐过程，函数直接执行）</span></span><br><span class="line"></span><br><span class="line">$(gdb)step(s)		<span class="comment">#单步调试（逐语句，跳入自定义函数内部执行）</span></span><br><span class="line"></span><br><span class="line">$(gdb)backtrace(bt)   <span class="comment">#查看函数的调用的栈帧和层级关系</span></span><br><span class="line"></span><br><span class="line">$(gdb)frame(f)	<span class="comment">#切换函数的栈帧</span></span><br><span class="line"></span><br><span class="line">$(gdb)info(i)   <span class="comment">#查看函数内部局部变量的数值</span></span><br><span class="line"></span><br><span class="line">$(gdb)finish		<span class="comment">#结束当前函数，返回到函数调用点</span></span><br><span class="line"></span><br><span class="line">$(gdb)<span class="built_in">continue</span>(c)		  <span class="comment">#继续运行</span></span><br><span class="line"></span><br><span class="line">$(gdb)<span class="built_in">print</span>(p)	<span class="comment">#打印值及地址(例如p x  表示打印名为x的变量)</span></span><br><span class="line"></span><br><span class="line">$(gdb)quit(q)		<span class="comment">#退出gdb</span></span><br><span class="line"></span><br><span class="line">$(gdb)<span class="built_in">break</span>+num(b)		<span class="comment">#在第num行设置断点</span></span><br><span class="line"></span><br><span class="line">$(gdb)info breakpoints(i b) <span class="comment">#查看当前设置的所有断点</span></span><br><span class="line"></span><br><span class="line">$(gdb)delete breakpoints num(d)	<span class="comment">#删除第num个断点</span></span><br><span class="line"></span><br><span class="line">$(gdb)display		<span class="comment">#追踪查看具体变量值</span></span><br><span class="line"></span><br><span class="line">$(gdb)undisplay <span class="comment">#取消追踪观察变量</span></span><br><span class="line"></span><br><span class="line">$(gdb)watch			<span class="comment">#被设置观察点的变量发生修改时，打印显示</span></span><br><span class="line"></span><br><span class="line">$(gdb)i watch		<span class="comment">#显示观察点</span></span><br><span class="line"></span><br><span class="line">$(gdb)<span class="built_in">enable</span> breakpoints  <span class="comment">#启用断点</span></span><br><span class="line"></span><br><span class="line">$(gdb)<span class="built_in">disable</span> breakpoints <span class="comment">#禁用断点</span></span><br><span class="line"></span><br><span class="line">$(gdb)x					<span class="comment">#查看内存x/20xw 显示20个单元，16进制，4字节每单元</span></span><br><span class="line"></span><br><span class="line">$(gdb)run argv[1] argv[2]  <span class="comment">#调试时命令行传参</span></span><br><span class="line"></span><br><span class="line">$(gdb)<span class="built_in">set</span> follow-fork-mode child#Makefile项目管理：选择跟踪父子进程（fork（））</span><br></pre></td></tr></table></figure>

<p>Tips:</p>
<ol>
<li><p>编译程序时需要加上<code>-g</code>，之后才能用gdb进行调试：<code>gcc -g main.c -o main</code></p>
<p>如果不加-g,将看不见程序的函数名,变量名,所代替的全是运行时的内存地址</p>
</li>
<li><p>回车键：重复上一命令</p>
</li>
</ol>
<h4 id="list显示代码命令详解"><a href="#list显示代码命令详解" class="headerlink" title="list显示代码命令详解"></a>list显示代码命令详解</h4><p>简写: <code>l</code></p>
<ul>
<li><p><code>list linenum</code>：打印第linenum行的上下文内容.</p>
</li>
<li><p><code>list function</code>：显示函数名为function的函数的源程序。</p>
</li>
<li><p><code>list</code>： 显示当前行后面的源程序。</p>
</li>
<li><p><code>list -</code>：显示当前文件开始处的源程序。</p>
</li>
<li><p><code>list file:linenum</code>: 显示file文件下第n行</p>
</li>
<li><p><code>list file:function</code>: 显示file文件的函数名为function的函数的源程序</p>
<p>一般是打印当前行的上5行和下5行, 如果显示函数是是上2行下8行, 默认是10行, 当然, 你也可以定制显示的范围, 使用下面命令可以设置一次显示源程序的行数。</p>
</li>
<li><p><code>set listsize count</code>：设置一次显示源代码的行数。         </p>
</li>
<li><p><code>show listsize</code>：   查看当前listsize的设置。</p>
</li>
</ul>
<h4 id="break设置断点命令详解"><a href="#break设置断点命令详解" class="headerlink" title="break设置断点命令详解"></a>break设置断点命令详解</h4><p>简写: <code>b</code></p>
<h5 id="简单断点–当前文件"><a href="#简单断点–当前文件" class="headerlink" title="简单断点–当前文件"></a>简单断点–当前文件</h5><ul>
<li><code>b 10</code> 在源程序第10行设置断点</li>
<li><code>b func</code> 设置断点,在func函数入口处</li>
</ul>
<h5 id="多文件设置断点"><a href="#多文件设置断点" class="headerlink" title="多文件设置断点"></a>多文件设置断点</h5><ul>
<li><code>b filename:linenum</code> 在源文件filename的linenum行处停止</li>
<li><code>b filename:function</code> 在源文件filename的function函数的入口处停止</li>
</ul>
<h5 id="查询所有断点"><a href="#查询所有断点" class="headerlink" title="查询所有断点"></a>查询所有断点</h5><p><code>info break</code>  (info可简写为 <code>i</code>)    所以可以直接写 <code>i b</code></p>
<h5 id="条件断点"><a href="#条件断点" class="headerlink" title="条件断点"></a>条件断点</h5><p>if关键词,后跟断点条件.如: <code>b test.c:8 if intValue == 5</code></p>
<h5 id="维护断点"><a href="#维护断点" class="headerlink" title="维护断点"></a>维护断点</h5><ul>
<li><p><code>delete [range...]</code> 删除指定的断点, 其简写命令为<code>d</code>。</p>
<ul>
<li>如果不指定断点号, 则表示删除所有的断点。range表示断点号的范围（如：3-7）。<ul>
<li>删除某个断点: <code>delete num</code></li>
<li>删除多个断点: <code>delete num1 num2  ...</code></li>
<li>删除连续的多个断点: <code>delete m-n</code></li>
<li>删除所有断点: <code>delete</code></li>
</ul>
</li>
<li>比删除更好的一种方法是disable停止点, disable了的停止点, GDB不会删除, 当你还需要时, enable即可, 就好像回收站一样。</li>
</ul>
</li>
<li><p><code>disable [range...]</code> 使指定断点无效, 简写命令是<code>dis</code>。</p>
<p>如果什么都不指定, 表示disable所有的停止点。</p>
<ul>
<li>使一个断点无效&#x2F;有效: <code>disable num</code></li>
<li>使多个断点无效有效: <code>disable num1 num2 ...</code></li>
<li>使多个连续的断点无效有效: <code>disable m-n</code></li>
<li>使所有断点无效有效: <code>disable</code></li>
</ul>
</li>
<li><p><code>enable [range...]</code> 使无效断点生效, 简写命令是<code>ena</code>。如果什么都不指定, 表示enable所有的停止点。</p>
<ul>
<li>使一个断点无效&#x2F;有效: <code>enable num</code></li>
<li>使多个断点无效有效: <code>enable num1 num2 ...</code></li>
<li>使多个连续的断点无效有效: <code>enable m-n</code></li>
<li>使所有断点无效有效: <code>disable/enable</code></li>
</ul>
</li>
</ul>
<h5 id="调试代码"><a href="#调试代码" class="headerlink" title="调试代码"></a>调试代码</h5><ul>
<li><code>run/r</code> 运行程序   <code>start</code>运行程序,停在第一行执行语句</li>
<li><code>next/n</code> 单步步过</li>
<li><code>step/s</code> 单步步入</li>
<li><code>finish</code> 退出进入的函数</li>
<li><code>until/u</code> 在一个循环体内单步跟踪时,该命令可以运行程序直到退出循环体</li>
<li><code>continue/c</code> 继续运行程序(若有断点,则跳到下一个断点)</li>
</ul>
<h5 id="显示运行中信息"><a href="#显示运行中信息" class="headerlink" title="显示运行中信息"></a>显示运行中信息</h5><ul>
<li><code>print/p  变量名/&amp;变量(变量的地址)</code> 查看运行时变量的值</li>
</ul>
<p><strong>自动显示变量的值</strong></p>
<p>你可以设置一些自动显示的变量, 当程序停住时, 或是在你单步跟踪时, 这些变量会自动显示。相关的GDB命令是display。</p>
<ul>
<li><strong>display</strong> 变量名</li>
<li><code>info display</code> – 查看display设置的自动显示的信息。</li>
<li><code>undisplay num</code>（info display时显示的编号）</li>
<li><code>delete display dnums …</code> 或 <code>undisplay dnums …</code>  – 删除自动显示, dnums意为所设置好了的自动显式的编号。如果要同时删除几个, 编号可以用空格分隔, 如果要删除一个范围内的编号, 可以用减号表示（如：2-5）<ul>
<li>删除某个自动显示: <code>undisplay num</code> 或者<code>delete display num</code></li>
<li>删除多个: <code>delete display num1 num2</code></li>
<li>删除一个范围: <code>delete display m-n</code></li>
</ul>
</li>
<li><code>disable display dnums…</code><ul>
<li>使一个自动显示无效: <code>disable display num</code></li>
<li>使多个自动显示无效: <code>delete display num1 num2</code></li>
<li>使一个范围的自动显示无效: <code>delete display m-n</code></li>
</ul>
</li>
<li><code>enable display dnums…</code><ul>
<li>使一个自动显示有效: <code>enable display num</code></li>
<li>使多个自动显示有效: <code>enable display num1 num2</code></li>
<li>使一个范围的自动显示有效: <code>enable display m-n</code></li>
</ul>
</li>
<li>disable和enalbe不删除自动显示的设置, 而只是让其失效和恢复。</li>
</ul>
<p><strong>查看变量的类型</strong></p>
<ul>
<li><p><code>ptype width</code> –查看变量width的类型</p>
<p>type &#x3D; double</p>
</li>
</ul>
<p><strong>改变变量的值</strong></p>
<p>可以使用 <code>set var</code> 命令来告诉GDB,width不是你GDB的参数,而是程序的变量名,如: <code>set var width = 47</code></p>
<p>在你改变程序变量取值时,最好都使用<code>set var</code> 格式的GDB命令</p>
<h2 id="makefile基本格式"><a href="#makefile基本格式" class="headerlink" title="makefile基本格式"></a>makefile基本格式</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">目标: 依赖</span><br><span class="line">(tab)命令<span class="comment">//必须是tab,不能是空格</span></span><br></pre></td></tr></table></figure>

<ul>
<li>目标:要生成的目标</li>
<li>依赖:目标文件由哪些文件生成</li>
<li>命令:通过执行该命令由依赖文件生成目标</li>
</ul>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">目标...: 依赖...</span></span><br><span class="line">    命令1<span class="comment">#注意每条命令前必须有且仅有一个 tab 保持缩进，这是语法要求（此处要注意vscode编写的话要把tab键切换成4空格给关掉）</span></span><br><span class="line">    命令2</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure>

<p>Makefile 文件默认只生成第一个目标文件即完成编译，但是我们可以通过 “ALL” 指定需要生成的目标文件。通常会把ALL也设置为伪目标</p>
<p><strong>makefile文件中tab开头的表示他是命令，命令开头有一些可选项可填入</strong>：</p>
<ul>
<li>开头加上@，表示该命令执行的时候，不显示命令本身</li>
<li>开头加上-，表示该命令执行失败也依然会执行后续命令。</li>
</ul>
<p><strong>最基础的makefile文件</strong></p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#当前目录下有first_make.cpp;second.cpp;second.h</span></span><br><span class="line"><span class="section">first_make:first_make.cpp second.cpp #目标文件：依赖文件</span></span><br><span class="line">	g++ first_make.cpp second.cpp -o first_make -lpthread<span class="comment">#-l表示添加某个库，因为使用到了pthread库</span></span><br></pre></td></tr></table></figure>

<p><strong>makefile工作流程</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/che77a38/blogImage/202112242025323.png" alt="image-20211224202502589"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/che77a38/blogImage2/202206051153723.jpeg" alt="捕获"></p>
<p><strong>makefile文件主要包含了5部分内容</strong>：</p>
<ol>
<li><strong>显示规则</strong>。说明了如何生成一个或多个目标文件。由makefile文件的创作者指出，包括要生成的文件，文件的依赖文件，生成的命令</li>
<li><strong>隐式规则</strong>。由于make有自动推导的功能，所以隐式的规则可以比较粗糙地简略书写makefile文件，这是由make所支持的。</li>
<li><strong>变量定义</strong>。在makefile文件中要定义一系列的变量，变量一般都是字符串，这与C语言中的宏有些类似。当makefile文件执行时，其中的变量都会扩展到相应的引用上。</li>
<li><strong>文件指示</strong>。其中包含3个部分，（1）在一个makefile文件中引用另一个makefile文件；（2）根据某些情况指定makefile文件中的有效部分；（3）定义一个多行的命令</li>
<li><strong>注释</strong>。makefile文件中只有行注释，其注释用“#”字符。如果要在makefile文件中使用“#”字符，可以用反斜框进行转义，如:”\#”</li>
</ol>
<h2 id="makefile中的变量"><a href="#makefile中的变量" class="headerlink" title="makefile中的变量"></a>makefile中的变量</h2><p>类似于C语言的宏定义</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">如:下面是变量的定义和使用</span><br><span class="line">foo = abc			<span class="comment">// 定义变量并赋值</span></span><br><span class="line">bar = $(foo)		<span class="comment">// 使用变量, $(变量名)</span></span><br></pre></td></tr></table></figure>

<p>主要有以下4种</p>
<ol>
<li>系统自带变量</li>
<li>手动定义变量</li>
<li>make传递变量</li>
<li>自动推理参数设置</li>
</ol>
<p>GUN的make很强大，它可以自动推导文件以及文件依赖关系后面的命令，于是我们就没必要去在每一个[.o]文件后都写上类似的命令，因为，我们的make会自动识别，并自己推导命令。只要make看到一个[.o]文件，它就会自动的把[.c]文件加在依赖关系中，<strong>如果make找到一个whatever.o，那么whatever.c，就会是whatever.o的依赖文件。并且gcc -c whatever.c也会被推导出来</strong></p>
<p><strong>正是因为强大的[自动推导功能]，因此依赖项写成.o文件后，就可以一条命令搞定整个编译过程</strong></p>
<p><strong>makefile中常见预定义变量</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/che77a38/blogImage/202112241646051.png" alt="image-20211224164553549"></p>
<p>p.s.CXXFLAGS&#x3D;-I..&#x2F;inc		表示头文件的路径在当前源文件的父文件夹中的inc文件夹中</p>
<p><strong>在makefile中变量的用法</strong>：<code>$(变量名)</code></p>
<p><strong>自动变量</strong></p>
<p><strong>自动变量</strong>(下面表格的变量)只能在规则中的命令使用</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/che77a38/blogImage/202112242045930.png" alt="image-20211224204554371"></p>
<p>$(@D)是目标文件的目录，$(@F)是目标文件，</p>
<p><strong>手动定义变量</strong>的方法：<br>$$<br>变量名&#x3D;存的值（仅第一次有效）<br>$$</p>
<p>$$<br>变量名：&#x3D;存的值（已经定义了变量，修改用这个）<br>$$</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#生成的目标文件名</span></span><br><span class="line">TARGET=main</span><br><span class="line"><span class="comment">#依赖文件.o(自己写的)</span></span><br><span class="line">OBJS=test.o main.o</span><br><span class="line"><span class="comment">#依赖文件，加入的头文件</span></span><br><span class="line">LIBS=-lpthread</span><br><span class="line"><span class="comment">#头文件所在目录</span></span><br><span class="line">CXXFLAGS:=-I../inc</span><br><span class="line"><span class="comment">#目标项：依赖项</span></span><br><span class="line"><span class="variable">$(TARGET)</span>:<span class="variable">$(OBJS)</span></span><br><span class="line">	<span class="variable">$(CXX)</span> <span class="variable">$^</span> -o <span class="variable">$@</span> <span class="variable">$(LIBS)</span></span><br><span class="line">	</span><br><span class="line"><span class="comment">#目标项clean</span></span><br><span class="line"><span class="section">clean:</span></span><br><span class="line">	<span class="variable">$(RM)</span> <span class="variable">$(TARGET)</span> <span class="variable">$(OBJS)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#标识伪目标</span></span><br><span class="line"><span class="meta"><span class="keyword">.PHONY</span>:clean</span></span><br></pre></td></tr></table></figure>

<p>生成动态库</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#生成的目标文件名</span></span><br><span class="line">TARGET=libfunc.so</span><br><span class="line"><span class="comment">#依赖文件.o(自己写的)</span></span><br><span class="line">OBJS=func.o</span><br><span class="line"><span class="comment">#依赖文件，加入的头文件</span></span><br><span class="line">LIBS=-lpthread</span><br><span class="line"><span class="comment">#头文件所在目录</span></span><br><span class="line">CXXFLAGS=-I../inc -fPIC</span><br><span class="line"><span class="variable">$(TARGET)</span>:<span class="variable">$(OBJS)</span></span><br><span class="line">	<span class="variable">$(CXX)</span> -shared <span class="variable">$^</span> -o <span class="variable">$@</span> <span class="variable">$(LIBS)</span></span><br><span class="line">	</span><br><span class="line"><span class="comment">#目标项clean</span></span><br><span class="line"><span class="section">clean:</span></span><br><span class="line">	<span class="variable">$(RM)</span> <span class="variable">$(TARGET)</span> <span class="variable">$(OBJS)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#标识伪目标</span></span><br><span class="line"><span class="meta"><span class="keyword">.PHONY</span>:clean</span></span><br></pre></td></tr></table></figure>

<p>联合动态库编译文件test</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">生成的目标文件名</span></span><br><span class="line">TARGET=test</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">依赖文件.o(自己写的)</span></span><br><span class="line">OBJS=test.o</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">头文件所在目录</span></span><br><span class="line">CXXFLAGS=-I../inc</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">库文件所在路径</span></span><br><span class="line">LDFLAGS=-L../lib</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">具体引用了哪些库</span></span><br><span class="line">LIBS=-lmylib -lpthread</span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">(TARGET):$(OBJS)</span></span><br><span class="line"><span class="meta prompt_">	$</span><span class="language-bash">(CXX) -shared $^ -o <span class="variable">$@</span> $(LIBS)</span></span><br><span class="line"><span class="meta prompt_">	</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">目标项clean</span></span><br><span class="line">clean:</span><br><span class="line"><span class="meta prompt_">	$</span><span class="language-bash">(RM) $(TARGET) $(OBJS)</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">标识伪目标</span></span><br><span class="line">.PHONY:clean</span><br></pre></td></tr></table></figure>

<p>上面所有案例都有个问题：一旦新增源文件,就要修改OBJS&#x3D;……</p>
<p>有没有一劳永逸的方法，不需要修改makefile就能适应呢。</p>
<h2 id="模式规则"><a href="#模式规则" class="headerlink" title="模式规则"></a>模式规则</h2><p>要求至少在规则的目标定义中要包含’%’,’%’表示一个或多个,在依赖条件中同样可以使用’%’,依赖条件中的取值取决于其目标:</p>
<p>如下:</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/che77a38/blogImage2/202206051342850.jpeg" alt="捕获"></p>
<h2 id="makefile的清理操作"><a href="#makefile的清理操作" class="headerlink" title="makefile的清理操作"></a>makefile的清理操作</h2><p>用途:清除编译生成的中间.o文件和最终目标文件</p>
<p><code>make clean</code> 命令 同于执行此操作</p>
<p>但是如果当前目录下有同名clean文件,则不执行clean对应的命令,解决方案是 <strong>伪目标声明</strong></p>
<p><code>.PHONY:clean</code> 声明目标为伪目标之后,makefile将不会检查该目标是否存在或者该目标是否需要更新,不检查直接调用对应的命令.</p>
<p><code>rm -f</code> 强制执行,比如若要删除的文件不存在,使用 <code>-f</code> 不会报错</p>
<h2 id="makefile命令中的特殊符号"><a href="#makefile命令中的特殊符号" class="headerlink" title="makefile命令中的特殊符号"></a>makefile命令中的特殊符号</h2><ul>
<li><code>-</code> 表示即使此条命令出错,make也会继续执行后续的命令.  如: <code>-rm main.o</code></li>
<li><code>@</code>不显示命令本身,只显示结果.  如:<code>@echo clean done</code></li>
</ul>
<p><strong>[注意]</strong>: <code>~/</code>这样的路径在makefile的命令中不可使用,取而代之可以这样: <code>$(HOME)/</code></p>
<h2 id="make命令的参数"><a href="#make命令的参数" class="headerlink" title="make命令的参数"></a>make命令的参数</h2><ul>
<li><code>make</code> <strong>默认执行第一个出现的目标</strong>,可通过 <code>make dest(dest表示其他目标)</code>指定要执行的目标</li>
<li><code>make -f 文件名</code>制定一个makefile文件来执行  如:<code>make -f mainmak</code>指定要执行的makefile文件名为mainmak</li>
<li>在<strong>测试makefile时</strong>，应先使用<code>-n</code>参数，检查无误再执行。(只显示命令,但不真正执行)</li>
</ul>
<h2 id="makefile的常见函数"><a href="#makefile的常见函数" class="headerlink" title="makefile的常见函数"></a>makefile的常见函数</h2><p>所有函数都有返回值</p>
<ul>
<li><p>wildcard函数    当前目录下匹配模式的文件    例如：src&#x3D;$(wildcard *.c)</p>
</li>
<li><p>notdir函数    去除路径    例如：$(notdir $src)</p>
</li>
<li><p>patsubst函数    模式匹配替换    例如：$(patsubst%.c,%.o,$src)</p>
<p>​    等价于$(src:.c&#x3D;.o)  意思是把src的所有.c后缀的文件名换成.o后缀文件</p>
</li>
<li><p>shell函数    执行shell命令    例如$(shell ls -d *&#x2F;)</p>
</li>
</ul>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#生成的目标文件名</span></span><br><span class="line">TARGET=main</span><br><span class="line"><span class="comment">#可以设定CXX(库可以直接加在这句中，如下list库，-g表示调试也可以加在这句中)</span></span><br><span class="line"><span class="comment">#CXX=g++ -g -llist</span></span><br><span class="line"><span class="comment">#依赖文件.o(自己写的)</span></span><br><span class="line">SRCS=<span class="variable">$(<span class="built_in">wildcard</span> *.cpp)</span></span><br><span class="line"><span class="comment">#上面与下面同理</span></span><br><span class="line"><span class="comment">#SRCS=$(shell ls *.cpp)</span></span><br><span class="line"><span class="comment">#下面的可以遍历所有子目录中的.cpp</span></span><br><span class="line"><span class="comment">#SRCS=$(shell find ./ -name &#x27;*.cpp&#x27;)</span></span><br><span class="line">OBJS=$(SRCS:.cpp=.o)</span><br><span class="line"><span class="comment">#依赖文件，加入的头文件</span></span><br><span class="line">LIBS=-lpthread</span><br><span class="line"><span class="comment">#头文件所在目录</span></span><br><span class="line">CXXFLAGS:=-I../inc</span><br><span class="line"><span class="comment">#目标项：依赖项</span></span><br><span class="line"><span class="variable">$(TARGET)</span>:<span class="variable">$(OBJS)</span></span><br><span class="line">	<span class="variable">$(CXX)</span> <span class="variable">$^</span> -o <span class="variable">$@</span> <span class="variable">$(LIBS)</span></span><br><span class="line">	</span><br><span class="line"><span class="comment">#目标项clean</span></span><br><span class="line"><span class="section">clean:</span></span><br><span class="line">	<span class="variable">$(RM)</span> <span class="variable">$(TARGET)</span> <span class="variable">$(OBJS)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#标识伪目标</span></span><br><span class="line"><span class="meta"><span class="keyword">.PHONY</span>:clean</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>到这里makefile中只在需要添加新的库的时候，在LIBS&#x3D;-lpthread后面添加链接库</p>
<p><strong>别人项目中的makefile编写参考</strong></p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">.SUFFIXES: .c .o .lo</span></span><br><span class="line"></span><br><span class="line">COMPILE = <span class="variable">$(CC)</span> -g -Wall -O -D_FILE_OFFSET_BITS=64 -DDEBUG</span><br><span class="line">INC_PATH = -I/usr/local/<span class="keyword">include</span></span><br><span class="line">LIB_PATH = -L/usr/local/lib -lfdfsclient -lfastcommon -lserverframe</span><br><span class="line">TARGET_PATH = <span class="variable">$(TARGET_PREFIX)</span>/bin</span><br><span class="line"></span><br><span class="line"><span class="comment">#SHARED_OBJS = common_func.o dfs_func.o</span></span><br><span class="line">SHARED_OBJS = common_func.o dfs_func_pc.o</span><br><span class="line"></span><br><span class="line">ALL_OBJS = <span class="variable">$(SHARED_OBJS)</span></span><br><span class="line"></span><br><span class="line">ALL_PRGS = gen_files test_upload test_download test_delete combine_result</span><br><span class="line"></span><br><span class="line"><span class="section">all: <span class="variable">$(ALL_OBJS)</span> <span class="variable">$(ALL_PRGS)</span></span></span><br><span class="line"><span class="section">.o:</span></span><br><span class="line">	<span class="variable">$(COMPILE)</span> -o <span class="variable">$@</span> <span class="variable">$&lt;</span>  <span class="variable">$(SHARED_OBJS)</span> <span class="variable">$(LIB_PATH)</span> <span class="variable">$(INC_PATH)</span></span><br><span class="line"><span class="section">.c:</span></span><br><span class="line">	<span class="variable">$(COMPILE)</span> -o <span class="variable">$@</span> <span class="variable">$&lt;</span>  <span class="variable">$(SHARED_OBJS)</span> <span class="variable">$(LIB_PATH)</span> <span class="variable">$(INC_PATH)</span></span><br><span class="line"><span class="section">.c.o:</span></span><br><span class="line">	<span class="variable">$(COMPILE)</span> -c -o <span class="variable">$@</span> <span class="variable">$&lt;</span>  <span class="variable">$(INC_PATH)</span></span><br><span class="line"><span class="section">.c.lo:</span></span><br><span class="line">	<span class="variable">$(COMPILE)</span> -c -fPIC -o <span class="variable">$@</span> <span class="variable">$&lt;</span>  <span class="variable">$(INC_PATH)</span></span><br><span class="line"><span class="section">install:</span></span><br><span class="line">	mkdir -p <span class="variable">$(TARGET_PATH)</span></span><br><span class="line">	cp -f <span class="variable">$(ALL_PRGS)</span> <span class="variable">$(TARGET_PATH)</span></span><br><span class="line"><span class="section">clean:</span></span><br><span class="line">	rm -f <span class="variable">$(ALL_OBJS)</span> <span class="variable">$(ALL_PRGS)</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>这个Makefile文件可以用来编译和链接一些测试程序，例如test_upload、test_download、test_delete等。您可以运行 <code>make all</code> 来编译所有程序，运行 <code>make install</code> 来安装所有程序，运行 <code>make clean</code> 来清理所有生成的文件。</p>
</blockquote>
<h1 id="cmake学习"><a href="#cmake学习" class="headerlink" title="cmake学习"></a>cmake学习</h1><blockquote>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/149337776">CMake 是一个开源的跨平台自动化构建系统，用来管理软件构建的过程，不依赖于某特定编译器，可以支持多层目录、多个应用程序和多个函数库。它用配置文件控制构建过程（build process）的方式和 Unix 的 make 相似，只是 CMake 的配置文件取名为 CMakeLists.txt。CMake 并不直接构建出最终的软件，而是产生标准的构建文件（如 Unix 的 Makefile 或 Windows Visual C++ 的 projects&#x2F;workspaces），然后再依一般的构建方式使用</a></p>
</blockquote>
<ul>
<li>CMake是一个<strong>跨平台</strong>的安装编译工具，可以用简单的语句来描述所有平台的安装(编译过程)。</li>
<li>CMake可以说已经成为大部分C++开源项目标配(事实标准)</li>
</ul>
<h2 id="语法特性介绍"><a href="#语法特性介绍" class="headerlink" title="语法特性介绍"></a>语法特性介绍</h2><p><strong>基本语法格式：指令(参数1 参数2…)</strong></p>
<ul>
<li>参数使用括弧括起</li>
<li>参数之间使用<strong>空格</strong>或<strong>分号</strong>分开</li>
</ul>
<p><strong>指令是大小写无关的，参数和变量是大小写相关的</strong></p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span>(HELLO hello.cpp)</span><br><span class="line"><span class="keyword">add_executable</span>(hello main.cpp hello.cpp)</span><br><span class="line"><span class="keyword">ADD_EXECUTABLE</span>(hello main.cpp <span class="variable">$&#123;HELLO&#125;</span>)</span><br></pre></td></tr></table></figure>

<p><strong>变量使用 ${}方式取值，但是在IF控制语句中是直接使用变量名</strong></p>
<h2 id="重要指令"><a href="#重要指令" class="headerlink" title="重要指令"></a>重要指令</h2><ul>
<li><p><strong><code>cmake_minimum_required</code></strong>&#x3D;&#x3D;指定CMake的<strong>最小版本要求</strong></p>
<p>语法：cmake_minimum_required(VERSION versionNumber [FATAL_ERROR])</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#CMakezz最小版本要求为2.8.3</span></span><br><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">2.8</span>.<span class="number">3</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>project</code></strong>&#x3D;&#x3D;<strong>定义工程名称</strong>，并可指定工程支持的语言</p>
<p>语法：project(projectname [CXX] [C] [Java])</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#指定工程名为HELLOWORLD </span></span><br><span class="line"><span class="keyword">project</span>(HELLOWORLD)</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>set</code></strong>&#x3D;&#x3D;显式的<strong>定义变量</strong></p>
<p>语法：set(VAR [VALUE] [CACHE TYPE DOCSTRING [FORCE]])</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#定义SRC变量，其值为main.cpp hello.cpp</span></span><br><span class="line"><span class="keyword">set</span>(SRC sayhello.cpp hello.cpp)</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>Include_directories</code></strong>&#x3D;&#x3D;向工程添加多个特定的<strong>头文件搜索路径</strong>—》相当于指定g++编译器的-I参数</p>
<p>要放在add_executable前面</p>
<p>语法：<code>include_directories([AFTER | BEFORE] [SYSTEM] dir1 dir2 ...)</code></p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">将/usr/<span class="keyword">include</span>/myincludefolder 和 ./<span class="keyword">include</span> 添加到头文件搜索路径</span><br><span class="line"><span class="keyword">include_directories</span>(/usr/<span class="keyword">include</span>/myincludefolder ./<span class="keyword">include</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>Link_directories</code></strong>&#x3D;&#x3D;向工程添加多个特定的<strong>库文件搜索路径</strong>—》相当于指定g++编译器的-L参数</p>
<p>要放在add_executable前面</p>
<p>语法：<code>link_directories(dir1 dir2 ...)</code></p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#将/usr/lib/mylibfolder 和 ./lib 添加到库文件搜索路径</span></span><br><span class="line"><span class="keyword">link_directories</span>(/usr/lib/mylibfolder ./lib)</span><br><span class="line"><span class="comment">#windows下会自动解析路径下的Debug或Release目录</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>add_library</code></strong>&#x3D;&#x3D;<strong>生成库文件</strong></p>
<p>语法：add_library(libname [SHARED | STATIC | MODULE] [EXCLUDE_FROM_ALL]  source1 source2 … sourceN)</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#通过变量SRC生成libhello.so共享库</span></span><br><span class="line"><span class="keyword">add_library</span>(hello SHARED <span class="variable">$&#123;SRC&#125;</span>)</span><br><span class="line"><span class="comment">#SHARED表示动态库，STATIC表示静态库</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>Add_compile_options</code></strong>&#x3D;&#x3D;<strong>添加编译参数</strong></p>
<p>语法：add_compile_options(<option> …)’</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#添加编译参数 -Wall -std=c++11 -o2</span></span><br><span class="line"><span class="keyword">add_compile_options</span>(-Wall -std=c++<span class="number">11</span> -o2)</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>Add_executable</code></strong>&#x3D;&#x3D;<strong>生成可执行文件</strong></p>
<p>语法：add_library(exename source1 source2 … sourceN)</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#编译main.cpp生成可执行文件main</span></span><br><span class="line"><span class="keyword">add_executable</span>(main main.cpp)</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>Target_link_libraries</code></strong>&#x3D;&#x3D;为target<strong>添加需要链接的共享库</strong>—》相当于指定g++编译器-l参数</p>
<p>放在add_executable后面</p>
<p>语法：<code>target_link_libraries(target library1&lt;debug | optimized&gt; library2...)</code></p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#将hello动态库文件链接到可执行文件main</span></span><br><span class="line"><span class="keyword">target_link_libraries</span>(main hello)</span><br><span class="line"><span class="comment">#此处无论是linux，mac，windows中，hello不需要写前面的lib和后面的后缀</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>add_subdirectory</code></strong>&#x3D;&#x3D;向当前工程添加存放源文件的子目录，并可以<strong>指定中间二进制和目标二进制存放的位置</strong></p>
<p>语法：add_subdirectory(source_dir [binary_dir] [EXCLUDE_FROM_ALL])</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#添加src子目录，src中需有一个CMakeLists.txt</span></span><br><span class="line"><span class="keyword">add_subdirectory</span>(src)</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>Aux_source_directory</code></strong>&#x3D;&#x3D;发现一个目录下<strong>所有的源文件并将列表存储在一个变量中</strong>，这个指令临时被用来自动构建源文件列表(多个该指令可以<strong>累加</strong>找到的源文件到变量中)</p>
<p>语法：<code>aux_source_directory(dir VARIABLE)</code></p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#定义SRC变量，其值为当前目录下所有的源代码文件</span></span><br><span class="line"><span class="keyword">aux_source_directory</span>(. SRC)</span><br><span class="line"><span class="comment">#编译SRC变量所代表的的源代码文件，生成main可执行文件</span></span><br><span class="line"><span class="keyword">add_executable</span>(main <span class="variable">$&#123;SRC&#125;</span>)</span><br></pre></td></tr></table></figure>

<p>自动查找头文件可以通过下面命令实现</p>
<p><code>FILE (GLOB H_FILE &quot;$&#123;INCLUDE_PATH&#125;/*.h*&quot;)</code></p>
<p>含义为将<code>$&#123;INCLUDE_PATH&#125;/*.h*</code>匹配的文件放到H_FILE变量中</p>
</li>
<li><p>add_definitions</p>
<p>用于向 C&#x2F;C++ 编译器添加预处理器定义</p>
<p>语法:<code>add_definitions(&quot;-DDEFINITION1 -DDEFINITION2&quot;)</code></p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">add_definitions</span>(-Dxlog_STATIC) <span class="comment">#传递宏给项目,宏的默认值为1</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="CMake常用变量"><a href="#CMake常用变量" class="headerlink" title="CMake常用变量"></a>CMake常用变量</h2><ul>
<li><p><code>CMAKE_C_FLAGS</code>  gcc编译选项</p>
</li>
<li><p><code>CMAKE_CXX_FLAGS</code>  g++编译选项</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#在CMAKE_CXX_FLAGS编译选项后追加-std=c++11</span></span><br><span class="line"><span class="keyword">set</span>(CMAKE_CXX_FLAGS <span class="string">&quot;$&#123;CMAKE_CXX_FLAGS&#125; -std=c++11&quot;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>CMAKE_BUILD_TYPE</code>  编译类型（Debug，Release）</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#设定编译类型为debug，调试时需要选择debug</span></span><br><span class="line"><span class="keyword">set</span>(CMAKE_BUILD_TYPE Debug)</span><br><span class="line"><span class="comment">#设定编译类型为release，调试时需要选择release</span></span><br><span class="line"><span class="keyword">set</span>(CMAKE_BUILD_TYPE Release)</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>CMAKE_BINARY_DIR</code> &#x2F; <code>PROJECT_BINARY_DIR</code> &#x2F; <code>&lt;projectname&gt;_BINARY_DIR</code></p>
<ol>
<li>这三个变量指代的内容是一致的</li>
<li>如果是in source build，指的就是工程顶层目录</li>
<li>如果是Out-of-source编译，指的是工程编译发生的目录</li>
<li>PROJECT_BINARY_DIR跟其他指令稍有区别，不过现在，你可以理解为他们是一致的</li>
</ol>
</li>
<li><p><code>CMAKE_SOURCE_DIR</code> &#x2F; <code>PROJECT_SOURCE_DIR</code> &#x2F; <code>&lt;projectname&gt;_SOURCE_DIR</code></p>
<ol>
<li>这三个变量指代的内容是一致的，不论采用何种编译方式，都是工程顶层目录</li>
<li>也就是在in source build时，他跟CMAKE_BINARY_DIR等变量一致</li>
<li>PROJECT_SOURCE_DIR跟其他指令稍有区别，不过现在，你可以理解为他们是一致的</li>
</ol>
</li>
<li><p><code>CMAKE_C_COMPILER</code>  指定C编译器</p>
</li>
<li><p><code>CMAKE_CXX_COMPILER</code>  指定C++编译器</p>
</li>
<li><p><code>EXECUTABLE_OUTPUT_PATH</code>  可执行文件输出的存放路径</p>
</li>
<li><p><code>LIBRARY_OUTPUT_PATH</code>  库文件输出的存放路径</p>
</li>
<li><p><code>CMAKE_VERBOSE_MAKEFILE</code> 开关显示详细的生成指令  ON&#x2F;OFF</p>
</li>
<li><p><code>CMAKE_CURRENT_LIST_DIR</code>当前正在执行的CMakeLists.txt文件所在的目录的路径</p>
</li>
</ul>
<h2 id="CMAKE编译工程"><a href="#CMAKE编译工程" class="headerlink" title="CMAKE编译工程"></a>CMAKE编译工程</h2><p>CMake目录结构：项目主目录存在一个CMakeLists.txt文件</p>
<h3 id="两种方式设置编译规则"><a href="#两种方式设置编译规则" class="headerlink" title="两种方式设置编译规则"></a>两种方式设置编译规则</h3><ol>
<li>包含源文件的子文件夹<strong>包含</strong>CMakeLists.txt文件，主目录的CMakeLists.txt通过add_subdirectory添加子目录即可</li>
<li>包含源文件的子文件夹<strong>未包含</strong>CMakeLists.txt文件，子目录编译规则体现在主目录的CMakeLists.txt中</li>
</ol>
<h3 id="编译流程"><a href="#编译流程" class="headerlink" title="编译流程"></a>编译流程</h3><ol>
<li>手动编写CMakeLists.txt</li>
<li>执行命令<code>cmake PATH</code>生成Makefile(PATH是顶层CMakeLists.txt所在的目录)</li>
<li>执行命令<code>make</code>进行编译</li>
</ol>
<p>p.s.  vs code有一个叫cmake的拓展，可以支持智能补全cmake指令与直接生成CMakeLists.txt模板文件</p>
<p><code>cmake tools</code>是让[vs code支持cmake的插件](#CMake Tools插件)</p>
<h3 id="两种构建方式"><a href="#两种构建方式" class="headerlink" title="两种构建方式"></a>两种构建方式</h3><ul>
<li><p><strong>内部构建</strong>(in_source build):不推荐使用</p>
<p>内部构建会在同级目录下产生一大堆中间文件，这些中间文件并不是我们最终所需要的，和工程源文件放在一起会显得杂乱无章</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##内部构建</span></span><br><span class="line"><span class="comment">#在当前目录下，编译本目录的CMakeLists.txt，生成Makefile和其他文件</span></span><br><span class="line">cmake .</span><br><span class="line"><span class="comment">#执行make命令，生成target</span></span><br><span class="line">make</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>外部构建</strong>(out_of_source build):推荐使用</p>
<p>将编译输出文件与源文件放到不同目录中</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##外部构建</span></span><br><span class="line"><span class="comment"># 1. 在当前目录下，创建build文件夹</span></span><br><span class="line">mkdir build</span><br><span class="line"><span class="comment"># 2. 进入到build文件夹（一般默认该文件夹都叫build）</span></span><br><span class="line">cd build</span><br><span class="line"><span class="comment"># 3. 编译上级目录的CMakeLists.txt，生成Makefile和其他文件。也可以在上级目录的情况下，直接cmake -B ./build</span></span><br><span class="line">cmake ..</span><br><span class="line"><span class="comment"># 4. 执行make命令，生成target</span></span><br><span class="line">make </span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="【实战】CMake代码实践"><a href="#【实战】CMake代码实践" class="headerlink" title="【实战】CMake代码实践"></a>【实战】CMake代码实践</h2><h3 id="最小的CMake工程"><a href="#最小的CMake工程" class="headerlink" title="最小的CMake工程"></a>最小的CMake工程</h3><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">3.0</span>)</span><br><span class="line"><span class="keyword">project</span>(HELLOWORLD)</span><br><span class="line"><span class="keyword">add_executable</span>(helloWorld_cmake helloworld.cpp)</span><br></pre></td></tr></table></figure>

<p>内部构建后（还未执行<code>make</code>）如图：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/che77a38/blogImage/202201171534397.png" alt="image-20220117153415398"></p>
<p>红色框中是原有的文件，紫色框中的是内部构建生成的,可以看到非常乱</p>
<p>外部构建后（还未执行<code>make</code>）如图：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/che77a38/blogImage/202201171551365.png" alt="image-20220117155157081"></p>
<p>cmake的产物都放到build文件夹下了，整洁了很多 ，如果之后执行<code>make</code>，生成的可执行文件也会在build文件夹下</p>
<h3 id="多目录工程-直接编译"><a href="#多目录工程-直接编译" class="headerlink" title="多目录工程-直接编译"></a>多目录工程-直接编译</h3><p>项目结构如下：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/che77a38/blogImage/202201171621715.png" alt="image-20220117162108450"></p>
<p>CMakeLists.txt如下：</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">3.0</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">project</span>(TESTCMAKE)</span><br><span class="line"></span><br><span class="line"><span class="keyword">INCLUDE_DIRECTORIES</span>(<span class="keyword">include</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">add_executable</span>(main_cmake main.cpp src/tool.cpp)</span><br></pre></td></tr></table></figure>

<p>操作如下：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/che77a38/blogImage/202201171622366.png" alt="image-20220117162245705"></p>
<p><code>make</code>后结构如下：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/che77a38/blogImage/202201171625167.png" alt="image-20220117162516558"></p>
<p>下面两个等同于<code>cd build;cmake .</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">在build上级目录</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">配置项目</span></span><br><span class="line">cmake -S . -B build</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">构建项目</span></span><br><span class="line">cmake --build build</span><br></pre></td></tr></table></figure>

<h2 id="vscode配合cmake进行调试"><a href="#vscode配合cmake进行调试" class="headerlink" title="vscode配合cmake进行调试"></a>vscode配合cmake进行调试</h2><ol>
<li>合理设置项目目录</li>
<li>编写项目源文件</li>
<li>编写CMakeLists.txt构建项目编译规则</li>
<li>使用外部构建，手动编译CMake项目</li>
<li>配置VSCode的json文件并调试项目</li>
</ol>
<p>CMakeLists.txt编写如下：</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">3.0</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">project</span>(TESTCMAKE)</span><br><span class="line"></span><br><span class="line"><span class="comment">##添加C++11支持及其他选项</span></span><br><span class="line"><span class="comment">#set(CMAKE_CXX_FLAGS &quot;$&#123;CMAKE_CXX_FLAGS&#125; -g -O2 -Wall&quot;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#调成debug模式</span></span><br><span class="line"><span class="comment">#set(CMAKE_BUILD_TYPE &quot;DEBUG&quot;)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">INCLUDE_DIRECTORIES</span>(<span class="variable">$&#123;CMAKE_SOURCE_DIR&#125;</span>/<span class="keyword">include</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#add_compile_options(-g)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">aux_source_directory</span>(./src SRC)</span><br><span class="line"></span><br><span class="line"><span class="keyword">aux_source_directory</span>(. SRC_MAIN)</span><br><span class="line"></span><br><span class="line"><span class="keyword">add_executable</span>(main_cmake <span class="variable">$&#123;SRC_MAIN&#125;</span> <span class="variable">$&#123;SRC&#125;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>-Wall    选项意思是编译后显示所有警告。</li>
<li>-O2    在这一级别GCC将会提供所有支持的优化，但这其中并不包括以空间换时间的优化手段，例如编译器不会使用循环展开和函数内联。和-O相比，该选项进一步加快了编译时间和生成代码的性能。</li>
</ul>
<p>点击下面图片位置，创建json文件</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/che77a38/blogImage/202201191633093.png" alt="image-20220119163310314"></p>
<p><strong>【超级重点】：必须在编辑框显示源文件的情况下点击这个按钮</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/che77a38/blogImage/202201192013927.png" alt="image-20220119201327676"></p>
<p><strong>CodeLLDB（用来debug，解决Catalina不支持lldb调试问题）</strong></p>
<p><strong>Mac在更新到Catalina后不再支持lldb调试</strong>,即C++(GDB&#x2F;LLDB)无效，因此下载CodeLLDB插件，也因此上图选择LLDB按钮。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/che77a38/blogImage/202201192012644.png" alt="image-20220119201249218"></p>
<p><strong>红框中设置为生成的可执行文件的路径</strong></p>
<p>然后直接按F5就可以调试运行</p>
<p>如果想每次调试前自动编译项目，可以配合cmake，在.vscode文件夹下新建tasks.json文件，将下面json复制进去：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;options&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;cwd&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;workspaceFolder&#125;/build&quot;</span> </span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;tasks&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;shell&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cmake&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cmake&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">&quot;..&quot;</span></span><br><span class="line">            <span class="punctuation">]</span></span><br><span class="line">                </span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="string">&quot;make&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;group&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;kind&quot;</span><span class="punctuation">:</span> <span class="string">&quot;build&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;isDefault&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;command&quot;</span><span class="punctuation">:</span> <span class="string">&quot;make&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line"></span><br><span class="line">            <span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Build&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;dependsOrder&quot;</span><span class="punctuation">:</span> <span class="string">&quot;sequence&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;dependsOn&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="string">&quot;cmake&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="string">&quot;make&quot;</span></span><br><span class="line">            <span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>上面json文件就相当于每次调试前执行如下代码：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">相当于在这个<span class="variable">$&#123;workspaceFolder&#125;</span>/build路径下执行如下代码</span></span><br><span class="line">cmake ..</span><br><span class="line">make</span><br></pre></td></tr></table></figure>

<p>这样的好处在于每次调试前保证调试的是最新的可执行文件。</p>
<h2 id="cmake进阶"><a href="#cmake进阶" class="headerlink" title="cmake进阶"></a>cmake进阶</h2><p>在使用CMake组织工程时，如果我们需要依赖某个库文件，需要完成以下步骤：</p>
<ol>
<li>查找库文件（find_package命令）</li>
<li>判断是否找到库文件（XXX_FOUND标记），并包含头文件（include_directories命令）</li>
<li>链接库文件到目标（target_link_libraries命令）</li>
</ol>
<p>例如：</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查找OpenCV是否安装</span></span><br><span class="line"><span class="keyword">find_package</span>(OpenCV REQUIRED core highgui imgproc imgcodecs)</span><br><span class="line"><span class="keyword">if</span> (OPENCV_FOUND)</span><br><span class="line">    <span class="keyword">message</span>(STATUS <span class="string">&quot;找到OpenCV:\&quot;$&#123;OpenCV_INCLUDE_DIRS&#125;\&quot;,ENABLE_OPENCV宏已打开&quot;</span>)</span><br><span class="line">    <span class="keyword">message</span>(STATUS <span class="string">&quot;找到OpenCV:\&quot;$&#123;OpenCV_LIBS&#125;\&quot;&quot;</span>)</span><br><span class="line">    <span class="keyword">include_directories</span>(<span class="variable">$&#123;OpenCV_INCLUDE_DIRS&#125;</span>)</span><br><span class="line">    <span class="keyword">add_definitions</span>(-DENABLE_OPENCV)</span><br><span class="line">    <span class="keyword">list</span>(APPEND LINK_LIB_LIST <span class="variable">$&#123;OpenCV_LIBS&#125;</span>)</span><br><span class="line"><span class="keyword">endif</span> (OPENCV_FOUND)</span><br></pre></td></tr></table></figure>

<h2 id="现代CMAKE"><a href="#现代CMAKE" class="headerlink" title="现代CMAKE"></a>现代CMAKE</h2><p>现代cmake的完全体:cmake版本3.15及以上</p>
<h1 id="终端指令学习"><a href="#终端指令学习" class="headerlink" title="终端指令学习"></a>终端指令学习</h1><h2 id="基本指令"><a href="#基本指令" class="headerlink" title="基本指令"></a>基本指令</h2><table>
<thead>
<tr>
<th>Windows</th>
<th>Macos&#x2F;linux</th>
<th align="left">功能</th>
</tr>
</thead>
<tbody><tr>
<td>cd</td>
<td>cd</td>
<td align="left">前往文件夹</td>
</tr>
<tr>
<td>cd</td>
<td>pwd</td>
<td align="left">取得目前所在路径</td>
</tr>
<tr>
<td>dir</td>
<td>ls</td>
<td align="left">查看当前目录的文件和文件夹</td>
</tr>
<tr>
<td>mkdir</td>
<td>mkdir</td>
<td align="left">新建文件夹</td>
</tr>
<tr>
<td>无指令</td>
<td>touch</td>
<td align="left">新建文件</td>
</tr>
<tr>
<td>copy</td>
<td>cp</td>
<td align="left">复制文件</td>
</tr>
<tr>
<td>move</td>
<td>mv</td>
<td align="left">移动文件</td>
</tr>
<tr>
<td>del</td>
<td>rm</td>
<td align="left">删除文件</td>
</tr>
<tr>
<td>cls</td>
<td>clear</td>
<td align="left">清除画面上的显示</td>
</tr>
</tbody></table>
<p><a href="#win%E7%BB%88%E7%AB%AF%E5%91%BD%E4%BB%A4%E7%9B%B8%E5%85%B3">win部分特殊终端命令</a></p>
<h2 id="homebrew常用命令"><a href="#homebrew常用命令" class="headerlink" title="homebrew常用命令"></a>homebrew常用命令</h2><p>安装软件：<code>brew install xxx</code><br>卸载软件：<code>brew uninstall xxx</code><br>搜索软件：<code>brew search xxx</code><br>更新软件：<code>brew upgrade xxx</code><br>查看列表：<code>brew list</code><br>更新brew：<code>brew update</code><br>清理所有包的旧版本：<code>brew cleanup</code><br>清理指定包的旧版本：<code>brew cleanup $FORMULA</code><br>查看可清理的旧版本包，不执行实际操作：<code>brew cleanup -n</code><br>查看包的详细信息：<code>brew info xxx</code><br>检查brew所有服务状态：<code>brew services list</code><br>启动xxx服务：<code>brew services start xxx</code><br>停止xxx服务：<code>brew services stop xxx</code><br>重启xxx服务：<code>brew services restart xxx</code><br>查看某个软件的安装路径: <code>brew --prefix xxx</code></p>
<p>删除所有未使用的依赖  <code>brew autoremove</code>  (加<code>-n</code>可以预先确定哪些软件将会被清理)</p>
<p><code>brew tap  someone/special</code> 这个命令会将 <code>someone/special</code> 仓库克隆到本地机器上的一个特定目录中（通常是 <code>/usr/local/Homebrew/Library/Taps</code>），Homebrew 之后会在这个仓库中查找软件包。</p>
<blockquote>
<p><code>brew tap</code> 是 Homebrew 的一个命令，用于添加额外的软件包源（也称为 “tap”）。Homebrew 默认情况下只包含其主仓库（homebrew&#x2F;core），这个仓库里包含了大量常用的软件包。但是，用户可能需要安装一些不在主仓库中的软件包，这时就可以使用 <code>brew tap</code> 命令来添加一个新的源。</p>
<p><strong>取消 tap</strong>: 如果你不再需要某个 tap，可以使用 <code>brew untap</code> 命令 followed by the tap’s name 来移除它</p>
<p><code>brew tap</code> 是一个非常有用的特性，让用户能够轻松地扩展 Homebrew 的软件库，安装和管理广泛的第三方软件包</p>
</blockquote>
<h3 id="浅克隆问题"><a href="#浅克隆问题" class="headerlink" title="浅克隆问题"></a>浅克隆问题</h3><p>Homebrew 浅克隆问题指的是 Homebrew 在安装或更新时，为了节省时间和带宽，通常会创建一个所谓的 “浅克隆”（shallow clone）的 Git 仓库。浅克隆只包含最近的提交记录，而不是整个仓库的历史记录。这通常足够 Homebrew 正常工作，因为大多数用户只关心最新的包版本。</p>
<p>然而，GitHub 对于浅克隆的更新操作提出了性能问题。因为浅克隆需要在服务器端进行更多的计算来确定要发送哪些数据给客户端。当大量用户进行浅克隆的更新时，这将对 GitHub 服务器产生很大的负担。</p>
<p>因此，Homebrew 在 GitHub 的请求下引入了一个限制，要求用户在更新浅克隆的 Homebrew 仓库之前，先将其转换为完整克隆（unshallow clone）。完整克隆包含了仓库的完整提交历史，虽然它需要更多的磁盘空间和更长的初始克隆时间，但之后的更新操作会更简单，对 GitHub 的服务器负载也更小。</p>
<p>你可以通过执行以下命令将 Homebrew 的浅克隆转换为完整克隆：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git -C /usr/local/Homebrew/Library/Taps/homebrew/homebrew-cask fetch --unshallow</span><br></pre></td></tr></table></figure>

<h1 id="win终端命令相关"><a href="#win终端命令相关" class="headerlink" title="win终端命令相关"></a>win终端命令相关</h1><p><a href="#%E7%BB%88%E7%AB%AF%E6%8C%87%E4%BB%A4%E5%AD%A6%E4%B9%A0">基本指令参考</a></p>
<h2 id="终端命令重命名"><a href="#终端命令重命名" class="headerlink" title="终端命令重命名"></a>终端命令重命名</h2><p>终端输入<code>$profile</code>查对应终端的配置文件所在,没有就自行新建</p>
<p>打开文件输入,格式:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> 别名 &#123; 需要替代的命令，可以包含空格 &#125;</span><br><span class="line">或者</span><br><span class="line"><span class="keyword">function</span> 名称 &#123; 需要替代的命令，可以包含空格 &#125;</span><br><span class="line"><span class="title class_">Set</span>-<span class="title class_">Alias</span> 别名 名称</span><br></pre></td></tr></table></figure>

<p>如:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> sshLinux&#123;</span><br><span class="line">	ssh <span class="string">&#x27;kylin@192.168.10.88&#x27;</span> $args</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Set</span>-<span class="title class_">Alias</span> sshlinux sshLinux</span><br></pre></td></tr></table></figure>

<p>保存后重启power shell就可以使用别名了</p>
<h2 id="powershell新建文件命令"><a href="#powershell新建文件命令" class="headerlink" title="powershell新建文件命令"></a>powershell新建文件命令</h2><p>powershell基本指令大多与linux一致,但无touch命令</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fsutil file creatnew 新建文件名 <span class="number">0</span></span><br></pre></td></tr></table></figure>

<h1 id="工具命令"><a href="#工具命令" class="headerlink" title="工具命令"></a>工具命令</h1><h2 id="ssh"><a href="#ssh" class="headerlink" title="ssh"></a>ssh</h2><p>ssh远程连接   <code>ssh 用户名@ip地址或域名</code>  </p>
<h2 id="scp"><a href="#scp" class="headerlink" title="scp"></a>scp</h2><p>从服务器上下载文件   <code>scp username@servername:/path/filename /var/www/local_dir（本地目录）</code></p>
<p>加上 <code>-r</code> 的参数才可以传目录</p>
<p>例如<code>scp root@192.168.0.101:/var/www/test.txt</code>  把192.168.0.101上的&#x2F;var&#x2F;www&#x2F;test.txt 的文件下载到&#x2F;var&#x2F;www&#x2F;local_dir（本地目录）</p>
<p> 上传本地文件到服务器  <code>scp /path/filename username@servername:/path   </code></p>
<p>例如<code>scp /var/www/test.php  root@192.168.0.101:/var/www/</code>  把本机&#x2F;var&#x2F;www&#x2F;目录下的test.php文件上传到192.168.0.101这台服务器上的&#x2F;var&#x2F;www&#x2F;目录中</p>
<p>如果上传下载的是整个目录,<code>scp</code>后加 <code>-r</code> </p>
<p>某些较新的系统scp命令默认使用SFTP协议来传输文件,但老系统却不支持sftp,此时使用<code>-O</code>使得scp变回传统传输行为</p>
<p><strong>sftp</strong></p>
<p>使用和scp类似,但功能更多</p>
<p>比如:SFTP支持断点续传，SCP则不能</p>
<h1 id="代码调试"><a href="#代码调试" class="headerlink" title="代码调试"></a>代码调试</h1><p> <strong><code>打断点</code></strong></p>
<ul>
<li>集成开发环境IDE </li>
<li>gdb</li>
</ul>
<p><strong><code>printf</code></strong>    适用于有调试终端的情况</p>
<p><strong><code>写log日志</code></strong>    当应用程序没有终端的时候</p>
<blockquote>
<p>此处记录一个小技巧,跟踪显示日志打印(以跟踪打印最后50行为例)</p>
<ul>
<li>windows: <code>Get-Content -Path &quot;C:\Path\To\Your\File.txt&quot; -Wait -Tail 50</code>  </li>
<li>Linux&#x2F;Mac: <code>tail -n 50 -f /path/to/your/file.txt</code></li>
</ul>
</blockquote>
<ul>
<li><p>应用程序发布了, 通过日志文件记录程序的工作状态</p>
<p>​	写日志有级别<br>​			级别越低写的日志越多<br>​			级别越高写的日志越少</p>
</li>
</ul>
<h1 id="IDE相关tips"><a href="#IDE相关tips" class="headerlink" title="IDE相关tips"></a>IDE相关tips</h1><p>在用vs调试的时候: 若看到<strong>无法解析的外部符号</strong>就是没有函数的实现, 应该是没有连接到库</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/e891377/article/details/113914595">各IDE跳出括号方法</a></p>
<h2 id="vs开发linux项目"><a href="#vs开发linux项目" class="headerlink" title="vs开发linux项目"></a>vs开发linux项目</h2><p>新建项目-跨平台-Linux-空项目</p>
<h3 id="VS远程开发"><a href="#VS远程开发" class="headerlink" title="VS远程开发"></a>VS远程开发</h3><p>工具-选项-跨平台-连接管理器-添加(主机名填写ip,端口22,填写用户名与密码)-连接</p>
<p>项目属性页-配置属性-常规  中:</p>
<ul>
<li>远程生成计算机选择上面添加的</li>
<li>远程生成根目录</li>
<li>远程生成项目目录</li>
</ul>
<h2 id="vscode远程开发"><a href="#vscode远程开发" class="headerlink" title="vscode远程开发"></a>vscode远程开发</h2><p>Vscode 安装 <code>remote development</code>插件</p>
<p>安装后打开远程资源管理器,设置为ssh target,点击+号键,添加ssh目标.</p>
<p>右键ssh目标选择连接,输入密码,开始远程开发</p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/671718415">更细节的操作参考</a></p>
<p>可以配合[给windows配置ssh server](#给windows配置ssh server)</p>
<h3 id="vscode配置C-调试"><a href="#vscode配置C-调试" class="headerlink" title="vscode配置C++调试"></a>vscode配置C++调试</h3><ol>
<li><p>编译的时候需要加<code>-g</code>选项,才会附带调试需要的信息</p>
</li>
<li><p>点击左侧菜单栏中的<code>运行和调试</code>中的<code>创建launch.json文件</code>按钮,如下图(非红圈)</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/che77a38/blogImage2/202302192059807.png" alt="image-20230219205902832" style="zoom:25%;" />

<p>点击后会在项目根目录下生成<code>.vscode/launch.json</code>文件</p>
</li>
</ol>
<h2 id="code-runner配置"><a href="#code-runner配置" class="headerlink" title="code runner配置"></a>code runner配置</h2><p>Code Runner默认运行是在输出端，是不能进行编辑输入的，所以我们要将其改到终端运行，打开VS Code设置，找到Run In Terminal配置处，将其勾选住，也可在设置的配置文件settings.json文件里添加”code-runner.runInTerminal”: true配置，保存，我们再通过Code Runner运行，就可以在终端中运行了，可以在上面进行输入了。</p>
<h2 id="windows下的vscode终端乱码"><a href="#windows下的vscode终端乱码" class="headerlink" title="windows下的vscode终端乱码"></a>windows下的vscode终端乱码</h2><blockquote>
<p>windows下乱码最简单的方式是设置通过utf-8 with BOM的方式保存,如果不行再参考下面的方式解决</p>
</blockquote>
<p>VSCode 默认是 utf-8 编码，而在中国地区下的 Windows 的 cmd 默认是 GBK 编码,因此需要配置vscode终端为utf-8编码</p>
<p>通过<code>chcp</code> 命令查看代码页编号，</p>
<ul>
<li><code>936</code> 对应 <code>GBK2312</code></li>
<li><code>65001</code> 对应 <code>UTF-8</code></li>
</ul>
<p>文件-首选项-设置,点击右上角<code>打开设置(json)</code>,添加如下代码:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;terminal.integrated.profiles.windows&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;Command Prompt&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;C:\\Windows\\System32\\cmd.exe&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;-NoExit&quot;</span><span class="punctuation">,</span> <span class="string">&quot;/K&quot;</span><span class="punctuation">,</span> <span class="string">&quot;chcp 65001 &gt; nul&quot;</span><span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;PowerShell&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;source&quot;</span><span class="punctuation">:</span> <span class="string">&quot;PowerShell&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;-NoExit&quot;</span><span class="punctuation">,</span> <span class="string">&quot;/C&quot;</span><span class="punctuation">,</span> <span class="string">&quot;chcp 65001&quot;</span><span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;terminal.integrated.defaultProfile.windows&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Command Prompt&quot;</span></span><br></pre></td></tr></table></figure>

<p>将以上配置添加在settings.json里最外层的{}里即可(注意！！！，如果{}里之前有内容记得要在最后一行加上一个英文逗号，之后再把配置复制进去)</p>
<hr>
<p>更好的方法是修改程序的locale变量，这个会修改C&#x2F;C++的运行环境，代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">td::locale::global(std::locale(&quot;.utf8&quot;)); </span><br><span class="line">// 或者 </span><br><span class="line">// std::setlocale(LC_ALL, &quot;.UTF-8&quot;);</span><br></pre></td></tr></table></figure>

<p>因为修改locale变量修改的是C&#x2F;C++的运行环境，并不会修改Windows系统函数的环境，所以如果调用系统函数<code>WriteConsoleOutput</code>函数，还是会出现乱码。 Windows上有些库（例如：spdlog）会调用<code>WriteConsoleOutput</code>函数，设置的locale还是会出现乱码，还需要设置控制台编码</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">std::locale::<span class="built_in">global</span>(std::<span class="built_in">locale</span>(<span class="string">&quot;.utf8&quot;</span>)); </span><br><span class="line"><span class="built_in">SetConsoleOutputCP</span>(CP_UTF8);</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="http://www.shouxieziti.cn/128315.html">更详细完整的说法参阅</a></p>
<h2 id="vscode的配置文件"><a href="#vscode的配置文件" class="headerlink" title="vscode的配置文件"></a>vscode的配置文件</h2><p>安装并配置好C&#x2F;C++插件后</p>
<ul>
<li><p>编译的话配置<a href="#tasks.json">tasks.json</a></p>
<p>它可以定义一系列的任务,包括编译,运行,测试等,以便在开发过程中快速执行这些任务</p>
</li>
<li><p>【调试】启动的话配置<a href="#launch.json">launch.json</a></p>
<p>它是用于调试的配置文件</p>
</li>
</ul>
<p>使用[CMake Tools插件](#CMake Tools插件)配合launch.json可以实现一键使用cmake启动程序的作用</p>
<h3 id="tasks-json"><a href="#tasks-json" class="headerlink" title="tasks.json"></a>tasks.json</h3><p><strong>终端-配置任务</strong>  生成tasks.json文件</p>
<p>下面为用clang++配置的任务</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="string">&quot;version&quot;</span>: <span class="string">&quot;2.0.0&quot;</span>,</span><br><span class="line">	<span class="string">&quot;tasks&quot;</span>: [</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="string">&quot;type&quot;</span>: <span class="string">&quot;cppbuild&quot;</span>,</span><br><span class="line">			<span class="string">&quot;label&quot;</span>: <span class="string">&quot;m1Mac单文件生成任务&quot;</span>,</span><br><span class="line">			<span class="string">&quot;command&quot;</span>: <span class="string">&quot;/usr/bin/clang++&quot;</span>,</span><br><span class="line">			<span class="string">&quot;args&quot;</span>: [</span><br><span class="line">				<span class="string">&quot;-std=c++17&quot;</span>,</span><br><span class="line">				<span class="string">&quot;-fcolor-diagnostics&quot;</span>,</span><br><span class="line">				<span class="string">&quot;-fansi-escape-codes&quot;</span>,</span><br><span class="line">				<span class="string">&quot;-g&quot;</span>,</span><br><span class="line">				<span class="string">&quot;$&#123;file&#125;&quot;</span>,<span class="comment">//此处为需要编译的源文件</span></span><br><span class="line">				<span class="string">&quot;-o&quot;</span>,</span><br><span class="line">				<span class="string">&quot;$&#123;fileDirname&#125;/$&#123;fileBasenameNoExtension&#125;&quot;</span></span><br><span class="line">			],</span><br><span class="line">			<span class="string">&quot;options&quot;</span>: &#123;</span><br><span class="line">				<span class="string">&quot;cwd&quot;</span>: <span class="string">&quot;$&#123;fileDirname&#125;&quot;</span></span><br><span class="line">			&#125;,</span><br><span class="line">			<span class="string">&quot;problemMatcher&quot;</span>: [</span><br><span class="line">				<span class="string">&quot;$gcc&quot;</span></span><br><span class="line">			],</span><br><span class="line">			<span class="string">&quot;group&quot;</span>: <span class="string">&quot;build&quot;</span>,</span><br><span class="line">			<span class="string">&quot;detail&quot;</span>: <span class="string">&quot;编译器: /usr/bin/clang++&quot;</span></span><br><span class="line">		&#125;</span><br><span class="line">	]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>配置好以后使用 <strong>终端-运行生成任务</strong> 来调用该tasks.json配置的任务</p>
<h3 id="launch-json"><a href="#launch-json" class="headerlink" title="launch.json"></a>launch.json</h3><p><strong>运行-添加配置</strong>  生成launch.json文件(生成的launch文件中可以进一步点击<code>添加配置</code>按钮生成小模版)</p>
<p>launch.json参考如下:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="comment">// 使用 IntelliSense 了解相关属性。 </span></span><br><span class="line">    <span class="comment">// 悬停以查看现有属性的描述。</span></span><br><span class="line">    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.2.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;configurations&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;g++ - 生成和调试活动文件&quot;</span><span class="punctuation">,</span><span class="comment">// 配置名称，将会在启动配置的下拉菜单中显示</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cppdbg&quot;</span><span class="punctuation">,</span><span class="comment">// 配置类型，这里只能为cppdbg</span></span><br><span class="line">            <span class="attr">&quot;request&quot;</span><span class="punctuation">:</span> <span class="string">&quot;launch&quot;</span><span class="punctuation">,</span><span class="comment">// 请求配置类型，可以为launch（启动）或attach（附加）</span></span><br><span class="line">            <span class="attr">&quot;program&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;fileDirname&#125;/$&#123;fileBasenameNoExtension&#125;&quot;</span><span class="punctuation">,</span><span class="comment">// 将要进行调试的程序的路径</span></span><br><span class="line">            <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="comment">// 程序调试时传递给程序的命令行参数，一般设为空即可</span></span><br><span class="line">            <span class="attr">&quot;stopAtEntry&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span> <span class="comment">// 设为true时程序将暂停在程序入口处，我一般设置为true</span></span><br><span class="line">            <span class="attr">&quot;cwd&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;fileDirname&#125;&quot;</span><span class="punctuation">,</span><span class="comment">// 调试程序时的工作目录</span></span><br><span class="line">            <span class="attr">&quot;environment&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="comment">// （环境变量？）</span></span><br><span class="line">            <span class="attr">&quot;externalConsole&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span><span class="comment">// 调试时是否显示控制台窗口，一般设置为true显示控制台</span></span><br><span class="line">            <span class="attr">&quot;MIMode&quot;</span><span class="punctuation">:</span> <span class="string">&quot;gdb&quot;</span><span class="punctuation">,</span><span class="comment">// 指定连接的调试器，可以为gdb或lldb。但目前lldb在windows下没有预编译好的版本。</span></span><br><span class="line">            <span class="comment">// 用处未知，模板如此</span></span><br><span class="line">            <span class="attr">&quot;setupCommands&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;为 gdb 启用整齐打印&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;-enable-pretty-printing&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;ignoreFailures&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;将反汇编风格设置为 Intel&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;-gdb-set disassembly-flavor intel&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;ignoreFailures&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="comment">// 调试会话开始前执行的任务，一般为编译程序。与tasks.json的label相对应</span></span><br><span class="line">            <span class="comment">//&quot;preLaunchTask&quot;: &quot;C/C++: g++ bulid active file&quot;,</span></span><br><span class="line">            <span class="attr">&quot;miDebuggerPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/usr/bin/gdb&quot;</span><span class="comment">// 调试器路径，Windows下后缀不能省略，Linux下则去掉</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43687811/article/details/122744673">vscode其他配置文件细节参考跳转</a></p>
<p><a target="_blank" rel="noopener" href="https://lzyws739307453.blog.csdn.net/article/details/123605259">参考2</a></p>
<h4 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h4><p>m1 mac上的launch.json案例</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.2.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;configurations&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;(lldb) 启动&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cppdbg&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;request&quot;</span><span class="punctuation">:</span> <span class="string">&quot;launch&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;program&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;fileDirname&#125;/$&#123;fileBasenameNoExtension&#125;&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;args&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;-std=c++17&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;stopAtEntry&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;cwd&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;fileDirname&#125;&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;environment&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;externalConsole&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;MIMode&quot;</span><span class="punctuation">:</span> <span class="string">&quot;lldb&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>设置好后,点击调试按钮进行调试</p>
<h3 id="c-cpp-properties-json"><a href="#c-cpp-properties-json" class="headerlink" title="c_cpp_properties.json"></a>c_cpp_properties.json</h3><p><code>c_cpp_properties.json</code> 文件是 Visual Studio Code (VS Code) 中用于配置C&#x2F;C++插件的重要文件。它主要用于针对特定项目设置包含头文件的路径，设置 C&#x2F;C++ 支持的版本号等。</p>
<p>一般情况下，<code>c_cpp_properties.json</code> 文件位于 VS Code 中项目的 <code>.vscode</code> 文件夹中。如果你的项目中没有这个文件，你可以通过以下步骤来创建它：</p>
<ol>
<li>在 VS Code 中打开命令面板（快捷键是 <code>Ctrl+Shift+P</code>）</li>
<li>输入并选择 <code>C/C++: Edit Configurations (UI)</code> 命令</li>
</ol>
<p>如果使用 CMake，VS Code 的 C&#x2F;C++ 插件可以自动处理包含路径和定义，因此不需要手动配置 <code>c_cpp_properties.json</code> 文件</p>
<p><strong>常用配置项</strong></p>
<ul>
<li><p><code>includePath</code> </p>
<p>用来指定头文件搜索路径的。当你在编写代码时，编译器会在 <code>includePath</code> 指定的路径中查找你引用的头文件。这样，编译器就能找到并正确地解析对应的头文件</p>
<p>此外，<code>includePath</code> 还有助于实现代码的自动补全功能,你在写代码的时候，VS Code 会根据 <code>includePath</code> 中的路径去找头文件，这样就可以使用自动补全功能，而且不会有下划线警告</p>
</li>
<li><p><code>cppStandard</code> </p>
<p>你想要设置的 C++ 版本号，例如 <code>&quot;c++17&quot;</code> 或 <code>&quot;c++20&quot;</code></p>
</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://code.visualstudio.com/docs/cpp/c-cpp-properties-schema-reference">官方配置文档</a></p>
<h2 id="vscode插件"><a href="#vscode插件" class="headerlink" title="vscode插件"></a>vscode插件</h2><blockquote>
<p>vscode设置技巧:</p>
<p><code>Ctrl + Shift + P</code>显示所有命令，查找<code>Preferences: OPen Default Settings (JSON)</code>，可以查看默认的配置文件，可以根据需要来定制进行环境的迁移</p>
</blockquote>
<h3 id="CMake-Tools插件"><a href="#CMake-Tools插件" class="headerlink" title="CMake Tools插件"></a>CMake Tools插件</h3><blockquote>
<p>cmake插件的目的是为了编写CMakeLists.txt的时候有智能提示,而CMake Tools插件是让vscode和cmake进行集成,更方便操作</p>
</blockquote>
<p>CMake Tools插件会在启动项目的时候检测是否存在CMakeLists.txt,存在才启动该插件的功能.因此新建的CMakeLists.txt被创建后要重启项目.</p>
<p>如果需要使用该插件来调试的话,需要配合<a href="#launch.json">launch.json</a>使用</p>
<p>launch.json需要修改的代码如下:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;program&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;command:cmake.launchTargetPath&#125;&quot;</span></span><br><span class="line">其实就是调用了CMake Tools插件提供的一个命令<span class="punctuation">:</span>cmake.launchTargetPath</span><br><span class="line">该命令的作用是编译好后返回生成的可执行程序的路径</span><br><span class="line"></span><br><span class="line">使用vscode集成终端添加<span class="punctuation">:</span></span><br><span class="line"><span class="attr">&quot;console&quot;</span><span class="punctuation">:</span> <span class="string">&quot;integratedTerminal&quot;</span></span><br></pre></td></tr></table></figure>

<p>接下来就可以通过F5来调试项目了,也可以使用vscode底部的运行和调试按钮</p>
<p><strong>C&#x2F;C++插件可以通过CMakeLists.txt自动配置vscode的代码提示.如果vscode的代码提示不正确,可以手动执行命令<code>C/C++:Select IntelliSense Configuration...</code>,然后选择<code>使用CMake Tools</code>,就可以使代码提示和CMakeLists.txt同步</strong></p>
<h3 id="vscode-clangd插件"><a href="#vscode-clangd插件" class="headerlink" title="vscode clangd插件"></a>vscode clangd插件</h3><blockquote>
<p>C&#x2F;C++插件代码一多,提示就太慢了,并且偶尔崩溃,使用clangd插件替代</p>
<p>二者都是智能提示插件,互相冲突</p>
</blockquote>
<p>当需要配置智能提示的头文件时:</p>
<ul>
<li><p>在项目目录的.vscode下新建settings.json文件</p>
</li>
<li><p>来添加编译选项,智能提示会依据这些编译选项来提示</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;clangd.fallbackFlags&quot;</span>: [</span><br><span class="line">    <span class="string">&quot;-I./inc&quot;</span>,</span><br><span class="line">    <span class="string">&quot;-std=c++14&quot;</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置完成后要重启vscode或者command+shift+p:restart-clangd-server才能生效</p>
</li>
</ul>
<p>clangd插件需要cmake下build文件夹生成的compile_commands.json文件来指导智能提示</p>
<p>如果是makefile项目,可以使用<code>compiledb -n make -C build</code>(pip安装命令)来生成compile_commands.json</p>
<p>如果是基于其他方式，可以使用<a target="_blank" rel="noopener" href="https://github.com/rizsotto/Bear">Bear项目</a>中的方式来生成对应的 compile_commands.json文件</p>
<h3 id="vscode-Clang-Format插件"><a href="#vscode-Clang-Format插件" class="headerlink" title="vscode Clang-Format插件"></a>vscode Clang-Format插件</h3><blockquote>
<p>代码格式化工具</p>
<p>clang-format基于Clang的代码解析能力，可以根据预定义的代码样式规范自动调整代码的缩进、换行、空格等格式</p>
</blockquote>
<p>可以在插件的设置中的style项中进行配置,如下图:</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/che77a38/blogImage2/202402141623239.png" alt="image-20240214162308645" style="zoom:33%;" />

<p>上图为针对Cpp语言的代码格式化设置</p>
<ul>
<li><code>IndentWidth</code>：指定每个缩进级别的空格数，默认为2。</li>
</ul>
<ol start="2">
<li><code>TabWidth</code>：指定Tab字符的宽度，默认为4。</li>
<li><code>UseTab</code>：指定是否使用Tab字符进行缩进，默认为false，即使用空格进行缩进。</li>
<li><code>ContinuationIndentWidth</code>：指定在行尾继续缩进的空格数，默认为4。</li>
</ol>
<h3 id="tabout"><a href="#tabout" class="headerlink" title="tabout"></a>tabout</h3><p>tab功能拓展,可以按一下tab直接从括号或引号中跳出,无需按方向键或end键</p>
<h3 id="gitlens"><a href="#gitlens" class="headerlink" title="gitlens"></a>gitlens</h3><p>功能非常强大,甚至能显示代码部分是谁在什么时候做的修改</p>
<p><a target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/items?itemName=eamodio.gitlens">GitLens – Git supercharged拓展地址</a></p>
<h3 id="文件路径跳转插件"><a href="#文件路径跳转插件" class="headerlink" title="文件路径跳转插件"></a>文件路径跳转插件</h3><p><a target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/items?itemName=duch11.quick-go-to-selected-terraform-path">quick-go-to-selected-terraform-path插件</a></p>
<h3 id="C-C-Include-Guard插件"><a href="#C-C-Include-Guard插件" class="headerlink" title="C&#x2F;C++ Include Guard插件"></a>C&#x2F;C++ Include Guard插件</h3><p>新建头文件时自动包含防重复包含的编译选项</p>
<p><a target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/items?itemName=akiramiyakoda.cppincludeguard">插件主页</a></p>
<h3 id="c-cpp-cmake-project-creator插件"><a href="#c-cpp-cmake-project-creator插件" class="headerlink" title="c cpp cmake project creator插件"></a>c cpp cmake project creator插件</h3><p>新建基于cmake的项目文件</p>
<p><a target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/items?itemName=ChenPerach.c-cpp-cmake-project-creator">插件主页</a></p>
<h3 id="Debug-Visualizer"><a href="#Debug-Visualizer" class="headerlink" title="Debug Visualizer"></a>Debug Visualizer</h3><p>调试可视化,c++还未完全支持</p>
<p><a target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/items?itemName=hediet.debug-visualizer">插件主页</a></p>
<p>使用:</p>
<p>命令行里输入 <code>Debug Visualizer: New View</code></p>
<p><a target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/items?itemName=chendm.translate">https://marketplace.visualstudio.com/items?itemName=chendm.translate</a>)</p>
<h3 id="变量名翻译"><a href="#变量名翻译" class="headerlink" title="变量名翻译"></a>变量名翻译</h3><p><a target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/items?itemName=Wangguixuan.var-translate-en">var-translate-en</a></p>
<p>mac上快捷键:</p>
<ul>
<li>双击control翻译成中文</li>
<li>control+shift+v 翻译成英文</li>
</ul>
<h3 id="自动补分号"><a href="#自动补分号" class="headerlink" title="自动补分号"></a>自动补分号</h3><p><a target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/items?itemName=vmsynkov.colonize">Colonize</a></p>
<ul>
<li>shift+enter自动补分号,光标停在末尾</li>
<li>alt+enter自动补分号,光标停在新行处</li>
</ul>
<h3 id="单元测试插件"><a href="#单元测试插件" class="headerlink" title="单元测试插件"></a>单元测试插件</h3><p>可以支持catch2,googleTest,docTest的vscode插件: <a target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/items?itemName=matepek.vscode-catch2-test-adapter">C++ TestMate</a></p>
<h3 id="容器开发支持"><a href="#容器开发支持" class="headerlink" title="容器开发支持"></a>容器开发支持</h3><p>主要是两个插件</p>
<ul>
<li>docker插件</li>
<li>Dev Containers插件</li>
</ul>
<h4 id="docker插件"><a href="#docker插件" class="headerlink" title="docker插件"></a>docker插件</h4><p>使用Docker扩展可以非常方便的从VisualStudio Code构建，管理和部署容器化应用程序</p>
<p>主要功能如下:</p>
<ul>
<li><p>自动生成dockerfile、docker-compose.yml和.dockerignore文件(按F1并搜索Docker：将Docker文件添加到Workspace)</p>
<p>Dockerfile包含了构建Docker容器的指令，而Docker Compose文件则用于定义多个容器之间的关系和配置</p>
</li>
<li><p>语法突出高亮显示以及docker-compose.yml和Dockerfile文件的智能提示,悬停提示,语法检查和分析，会提示警告或错误</p>
</li>
<li><p>集成最常见的Docker命令（例如docker build，docker push等，需按F1唤起）</p>
</li>
<li><p>Docker镜像、容器管理</p>
</li>
<li><p>对Azure的支持（这块我们就不具体介绍了）</p>
</li>
<li><p>.NET Core程序调试支持</p>
</li>
<li><p>连接docker-machine</p>
</li>
</ul>
<h4 id="Dev-Containers插件"><a href="#Dev-Containers插件" class="headerlink" title="Dev Containers插件"></a>Dev Containers插件</h4><p><a target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-containers">Dev Containers</a></p>
<p>Dev Containers 允许使用 Docker 容器作为完整功能的开发环境，提供一致、易于复制的工具链和隔离的开发环境。</p>
<ul>
<li><strong>使用Docker的方式</strong>: 可以通过多种方式在 Dev Containers 中使用 Docker，包括本地安装 Docker、远程环境安装 Docker，以及使用其他符合 Docker 标准的 CLI。</li>
<li><strong>工作原理</strong>: Dev Containers 扩展会启动或附加到运行着定义良好的工具和运行时堆栈的开发容器，将工作区文件从本地文件系统挂载到容器中，并在容器内安装和运行扩展。</li>
</ul>
<p>常配合<a target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-docker">docker插件</a>使用,连接docker容器,开发环境标准化</p>
<h3 id="代码悬浮翻译插件"><a href="#代码悬浮翻译插件" class="headerlink" title="代码悬浮翻译插件"></a>代码悬浮翻译插件</h3><p><a target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/items?itemName=w88975.code-translate">Code Translate</a></p>
<p>可以自由拆分组合词翻译,鼠标悬浮翻译,快速</p>
<p>代码中单词翻译的终极解决方法</p>
<h3 id="日志文件高亮显示插件"><a href="#日志文件高亮显示插件" class="headerlink" title="日志文件高亮显示插件"></a>日志文件高亮显示插件</h3><p><a target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/items?itemName=emilast.LogFileHighlighter">Log File Highlighter</a></p>
<p>排列整齐,高亮显示</p>
<h3 id="自动生成Getter和Setter函数"><a href="#自动生成Getter和Setter函数" class="headerlink" title="自动生成Getter和Setter函数"></a>自动生成Getter和Setter函数</h3><p>要自己试一下才知道哪个最适合自己</p>
<p><a target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/items?itemName=afmicc.GetterAndSetterGenerator">Getter and Setter Generator</a></p>
<p><a target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/items?itemName=JuleeSan.cpp-getter-setter-generator">C++ Getter&#x2F;Setter Generator</a></p>
<p><a target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/items?itemName=Gabsii.getter-setter-generator">Getter&#x2F;Setter Generator</a></p>
<h3 id="一键复制文件给AI等结合Aider使用"><a href="#一键复制文件给AI等结合Aider使用" class="headerlink" title="一键复制文件给AI等结合Aider使用"></a>一键复制文件给AI等结合Aider使用</h3><p><a target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/items?itemName=nicepkg.aide-pro">Aide插件</a></p>
<p>利用ai API密钥可以一键生成注释</p>
<h3 id="可视化文件插件"><a href="#可视化文件插件" class="headerlink" title="可视化文件插件"></a>可视化文件插件</h3><p><a target="_blank" rel="noopener" href="https://github.com/LiRenTech/visual-file-vscode">记录时还未上架vscode插件市场</a></p>
<p>使用方式: F1后输入visual file命令</p>
<h3 id="JavaScript-Debugger"><a href="#JavaScript-Debugger" class="headerlink" title="JavaScript Debugger"></a>JavaScript Debugger</h3><p>vscode断点映射到浏览器</p>
<h3 id="css-pick"><a href="#css-pick" class="headerlink" title="css pick"></a>css pick</h3><p>预览当前应用的css代码</p>
<p><a target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/items?itemName=pranaygp.vscode-css-peek">下载地址</a></p>
<h3 id="console-ninja"><a href="#console-ninja" class="headerlink" title="console ninja"></a>console ninja</h3><p>将<code>console.log</code>显示直接显示到代码右侧</p>
<p><a target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/items?itemName=WallabyJs.console-ninja">下载地址</a></p>
<h3 id="Code-spell-chacker"><a href="#Code-spell-chacker" class="headerlink" title="Code spell chacker"></a>Code spell chacker</h3><p>拼写检查,蓝线标识拼写错误</p>
<p><a target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/items?itemName=streetsidesoftware.code-spell-checker">下载地址</a></p>
<h3 id="代码书签插件"><a href="#代码书签插件" class="headerlink" title="代码书签插件"></a>代码书签插件</h3><p><a target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/items?itemName=alefragnani.Bookmarks">下载地址</a></p>
<p>可以给代码打书签</p>
<h3 id="注释中的todo高亮插件"><a href="#注释中的todo高亮插件" class="headerlink" title="注释中的todo高亮插件"></a>注释中的todo高亮插件</h3><p>可以将注释中的todo高亮显示</p>
<p><a target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/items?itemName=wayou.vscode-todo-highlight">下载地址</a></p>
<h3 id="粘贴JSON变为类"><a href="#粘贴JSON变为类" class="headerlink" title="粘贴JSON变为类"></a>粘贴JSON变为类</h3><p>Paste JSON as Code</p>
<p><a target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/items?itemName=quicktype.quicktype">下载地址</a></p>
<h3 id="c-相关插件盘点"><a href="#c-相关插件盘点" class="headerlink" title="c#相关插件盘点"></a>c#相关插件盘点</h3><h4 id="从CSharp代码生成PlantUML类图"><a href="#从CSharp代码生成PlantUML类图" class="headerlink" title="从CSharp代码生成PlantUML类图"></a>从CSharp代码生成PlantUML类图</h4><p>这是一个命令行工具,但有配套的vscode插件可以使用</p>
<p><a target="_blank" rel="noopener" href="https://github.com/pierre3/PlantUmlClassDiagramGenerator">开源地址</a></p>
<h2 id="vscode配置qt开发"><a href="#vscode配置qt开发" class="headerlink" title="vscode配置qt开发"></a>vscode配置qt开发</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://www.bilibili.com/video/BV1YL411L7Sg" alt="vscode开发qt|720x360"></p>
<h2 id="vs团队资源管理器"><a href="#vs团队资源管理器" class="headerlink" title="vs团队资源管理器"></a>vs团队资源管理器</h2><p>VS团队管理器是一种基于Git for Windows的Git GUI. 即命令都是由Git for Windows去执行的, 而VS只负责将界面的UI操作转换成对应的命令行发送给Git for Windows.直接作为一个管理器嵌入在VS中</p>
<p>在单个组件中搜索git安装两个组件:</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/che77a38/blogImage2/202404191142723.png" alt="image-20240419114211380" style="zoom:25%;" />

<p>VS的Github扩展需要浏览器支持,本质是在浏览器安装了个插件</p>
<p>装好后,可以直接在github打开该界面</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/che77a38/blogImage2/202404191149681.gif" alt="20200621211708619" style="zoom: 33%;" />

<p>手动打开clone项目:</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/che77a38/blogImage2/202404191158006.png" alt="image-20240419115818424" style="zoom: 25%;" /><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/che77a38/blogImage2/202404191158916.png" alt="image-20240419115854380" style="zoom: 25%;" /></p>
<h3 id="主页介绍"><a href="#主页介绍" class="headerlink" title="主页介绍"></a>主页介绍</h3><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/che77a38/blogImage2/202404191333060.png" alt="vsRemote" style="zoom: 50%;" />

<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/luoyu510183/article/details/106888059">详情参考</a></p>
<ol>
<li><strong>更改（Change）</strong>：这是你对代码进行的修改。当你在Visual Studio中修改了代码后，这些更改会在”更改”区域中显示出来。你可以查看你的更改，然后提交这些更改到本地的Git仓库。对应的Git命令是&#96;git commit</li>
<li><strong>分支（Branch）</strong>：在Git中，分支是用来隔离你的工作环境的，让你可以在不影响其他分支的情况下进行开发。你可以创建新的分支进行开发，完成后再将其合并回主分支。对应的Git命令是<code>git branch</code>来创建新的分支，<code>git checkout</code>来切换分支，<code>git merge</code>来合并分支</li>
<li><strong>拉取请求（Pull Request）</strong>：这是一种在团队中协作开发的方式。你可以在自己的分支上进行开发，然后通过创建拉取请求来请求将你的更改合并到主分支。这也是一种代码审查的方式，可以让团队成员在合并前对你的更改进行审查。对应的Git命令是<code>git pull</code>来拉取最新的更改</li>
<li><strong>同步（Sync）</strong>：这是将你的本地仓库与远程仓库进行同步的操作。你可以拉取远程仓库的最新更改到你的本地仓库，也可以将你的更改推送到远程仓库。对应的Git命令是<code>git pull</code>来拉取最新的更改，<code>git push</code>来推送你的更改</li>
<li><strong>标记（Tag）</strong>：在Git中，标记通常用于标记某个重要的提交点，如版本发布等。对应的Git命令是<code>git tag</code>来创建新的标签</li>
</ol>
<p>点击分支,右键某分支,可以选择查看历史记录,打开的窗口能看到详细的时间点流程图</p>
<h2 id="vscode相关设置"><a href="#vscode相关设置" class="headerlink" title="vscode相关设置"></a>vscode相关设置</h2><ul>
<li>editor.wordSeparator可以设置分隔符,类似<code>-</code>的从中剔除,可以选中整个<code>-</code>分割的名称</li>
<li>explorer.compactFolders设置为false: 关闭单目录层级融合</li>
<li>editor.dragAndDrop 设置为false:禁止代码拖放</li>
<li>Editor: Insert Spaces  设置为true  用空格替代tab(对各种编译器兼容性有好处)</li>
<li>editor.acceptSuggestionOnEnter   将其设置为”off”，这样在按下回车键时就不会选择匹配项了(还是smart好)👌</li>
<li>Editor: Format On Save  设置是否在保存的时候自动格式化代码</li>
</ul>
<h2 id="vs相关设置"><a href="#vs相关设置" class="headerlink" title="vs相关设置"></a>vs相关设置</h2><p>[[CSharp入门#visual studio开发环境相关|参考此处笔记]]</p>
<h2 id="给windows配置ssh-server"><a href="#给windows配置ssh-server" class="headerlink" title="给windows配置ssh server"></a>给windows配置ssh server</h2><p>如果在启用或关闭Windows功能中没有看到ssh服务器端的选项的话,可以自行安装,遵循一下步骤:</p>
<p>以管理员启动PowerShell</p>
<ol>
<li><p>先查看是否已安装:</p>
<p><code>   Get-WindowsCapability -Online | Where-Object Name -like &#39;OpenSSH*&#39;</code></p>
</li>
<li><p>安装OpenSSH</p>
<ul>
<li>安装 OpenSSH 客户端：<code>Add-WindowsCapability -Online -Name OpenSSH.Client~~~~0.0.1.0</code></li>
<li>安装 OpenSSH 服务器：<code>Add-WindowsCapability -Online -Name OpenSSH.Server~~~~0.0.1.0</code></li>
</ul>
</li>
<li><p>安装好后的配置</p>
<ul>
<li>设置 sshd 服务自动启动：<code>Set-Service -Name sshd -StartupType &#39;Automatic&#39;</code></li>
<li>确保 Windows Defender 防火墙允许 tcp 22 端口的入站连接。若规则丢失或被禁用，可以创建新规则：<code>New-NetFirewallRule -Name sshd -DisplayName &#39;OpenSSH Server (sshd)&#39; -Enabled True -Direction Inbound -Protocol TCP -Action Allow -LocalPort 22;</code></li>
<li>（可选）如果要修改配置，如设置用户访问权限，可以编辑 sshd_config 配置文件：Start-Process notepad C:\ProgramData\ssh\sshd_config，编辑完成后保存并关闭记事本；</li>
</ul>
</li>
<li><p>重启sshd服务</p>
<p><code>Restart-Service sshd</code></p>
</li>
</ol>
<p>上述方法不行的话,还可以通过到github上下载 openssh-win64.zip方式来安装</p>
<p>vscode远程连接的用户名是<code>C:\Users\</code>下的用户名之一,默认是<code>ADMIN</code>,注意要是激活电脑时使用的用户名,密码为开机密码,这样能确保权限够高,能安装上vscode服务端.</p>
<p>配合<a href="#vscode%E8%BF%9C%E7%A8%8B%E5%BC%80%E5%8F%91">vscode远程开发</a>使用</p>
<h1 id="代理相关"><a href="#代理相关" class="headerlink" title="代理相关"></a>代理相关</h1><h2 id="代理模式"><a href="#代理模式" class="headerlink" title="代理模式"></a>代理模式</h2><ul>
<li><p>系统代理</p>
<p>将数据交给本地http&#x2F;socks服务的系统代理,GFW可以判断得到是vpn链接发起请求,由于其处于灰色地带,正规途径有需要,因此会放行,但特殊时期可能阻断</p>
<p>问题:并非所有软件都遵循系统代理,除去浏览器,绝大部分软件都不会走系统代理,甚至连设置代理的地方都没有,行为完全取决于软件开发者.并且系统代理一般都是http代理而非socks5,http代理不支持udp,游戏等流量无法代理</p>
</li>
<li><p>TUN&#x2F;TAP代理(最常用)</p>
<p>使用虚拟网卡接管系统全局流量的tun&#x2F;tap代理</p>
<p>主流模式,手机默认就是这种模式,软路由接管全家科学上网也是同样的原理(称为透明代理)</p>
<p>问题:我们使用的ss,vmess,trojan等主流的翻墙协议都无法封装网络层的数据包,比如tun模式,ping谷歌的话,返回假延迟,因为上述协议无法代理网络层的icmp协议</p>
</li>
<li><p>真VPN代理</p>
<p>能封装网络层数据包,只有能封装网络层数据包,才能实现异地组网,内网穿透,才能称为真正的VPN</p>
<p>软件一般是用WireGuard,可以正常ping外网地址</p>
<p>问题:并非为翻墙而生,只是对数据进行加密顺便实现了翻墙功能,他的流量清晰明了地写着它就是VPN的流量.而且vpn分流很不方便.因此不推荐用来科学上网</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/che77a38/blogImage2/202307221059694.png" alt="image-20230722105912700"></p>
</li>
</ul>
<p>SS协议  –减少GFW重放攻击-&gt;  SSR协议(带伪装插件的SS协议)</p>
<p>SSR协议</p>
<blockquote>
<p>DNS泄露:clsh使用了ip规则进行分流的情况下,访问谷歌之前必须先得到谷歌的ip地址,于是clash发起dns请求,dns如果是明文的,那么当你要到谷歌ip的时候,马上给其他服务器发了一堆加密数据,该行为特征,鬼都知道你在干啥.再比如:网飞客户端偷偷发一个dns请求,权威dns服务器记载的这个dns请求的上游dns服务器所在地就会和代理服务器的上游dns服务器所在地不是一个地区,以此判定你在使用vpn工具</p>
<p>DNS泄露的本质原因:在代理的情况下,本地发出了dns请求,而这可能仅仅是为了获得ip匹配clash规则中的ip分流规则,实际上真正的dns解析依旧会在远程代理服务器上进行.</p>
<p>解决方案:fake-ip模式:<a target="_blank" rel="noopener" href="https://www.hughh.top/posts/soft-routing-guide-3/">当我们使用Fake-IP模式时（openclash运行在路由器上），浏览器请求dns解析，dns解析请求被clash截获，clash立刻返回一个Fake IP给浏览器，浏览器根据ip发起连接，请求被clash拦截，clash根据fake ip在自己的映射表中反查出域名，再用域名去走代理，代理服务器解析dns。</a><a target="_blank" rel="noopener" href="https://www.hughh.top/posts/soft-routing-guide-3/">3</a><a target="_blank" rel="noopener" href="https://github.com/vernesong/OpenClash/wiki/%E5%B8%B8%E8%A7%84%E8%AE%BE%E7%BD%AE"> 这样客户端响应速度加快，浏览体验更加顺畅，减轻网页加载时间过长的情况。</a><a target="_blank" rel="noopener" href="https://github.com/vernesong/OpenClash/wiki/%E5%B8%B8%E8%A7%84%E8%AE%BE%E7%BD%AE">4</a></p>
</blockquote>
<p>软件层面  v2rayN -&gt; shadowsocks -&gt; </p>
<h2 id="DNS分流"><a href="#DNS分流" class="headerlink" title="DNS分流"></a>DNS分流</h2><h2 id="UDP穿透篇"><a href="#UDP穿透篇" class="headerlink" title="UDP穿透篇"></a>UDP穿透篇</h2><h2 id="clash配置文件"><a href="#clash配置文件" class="headerlink" title="clash配置文件"></a>clash配置文件</h2><p>proxy-providers   节点提供者</p>
<p>proxy-groups  代理组</p>
<h1 id="兼容性相关"><a href="#兼容性相关" class="headerlink" title="兼容性相关"></a>兼容性相关</h1><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/679130138">各种平台宏详细参考</a></p>
<ul>
<li><p>路径兼容性</p>
</li>
<li><p>使用跨平台的库和框架</p>
<p>Boost,QT,</p>
</li>
<li><p>避免使用平台特定API,万不得已使用条件编译根据不同平台编写不同代码</p>
<p>需要注意的是，使用条件编译也存在一些缺点。例如，代码可读性较差，维护成本较高，容易引入错误等。因此，应该谨慎使用条件编译。</p>
</li>
<li><p>使用跨平台的编译器</p>
<p>GCC&#x2F;Clang&#x2F;Visual Studio Code等等</p>
</li>
</ul>
<p><strong>路径兼容性</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//例如</span></span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> _WIN32</span></span><br><span class="line"><span class="type">const</span> <span class="type">char</span> pathSeparator = <span class="string">&#x27;\\&#x27;</span>;</span><br><span class="line"><span class="meta">#<span class="keyword">else</span></span></span><br><span class="line"><span class="type">const</span> <span class="type">char</span> pathSeparator = <span class="string">&#x27;/&#x27;</span>;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br></pre></td></tr></table></figure>

<p>使用boost库方案:</p>
<p>使用Boost库中的<code>boost::filesystem::path</code>来保证路径操作在不同平台上的一致性；在多线程编程中，可以使用Boost库中的线程、互斥锁和条件变量等组件来保证多线程代码在不同平台上的可移植性。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;boost/filesystem.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    boost::<span class="function">filesystem::path <span class="title">p</span><span class="params">(<span class="string">&quot;path/to/file.txt&quot;</span>)</span></span>;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;File extension: &quot;</span> &lt;&lt; p.<span class="built_in">extension</span>() &lt;&lt; std::endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="交叉编译"><a href="#交叉编译" class="headerlink" title="交叉编译"></a>交叉编译</h1><p>构建机平台   –&gt;   目标机平台</p>
<blockquote>
<p><strong>本机编译</strong>，顾名思义就是本机编译的程序或者动态在本机上运行（也可以在同平台的机器上运行，这里不做过多赘述），这个很好理解，要编译的程序或者动态库依赖的一些头文件或者库文件就在本机系统上，或在默认目录(以linux为例，&#x2F;usr&#x2F;include &#x2F;usr&#x2F;lib等)，另外也可以通过人工指定的方式（例如qt中可以通过LIBS关键字或者INCLUDEPATH等指定库文件路径和头文件路径等）指明依赖的头文件和库文件位置</p>
</blockquote>
<h1 id="基于gitlab的工作流程设计"><a href="#基于gitlab的工作流程设计" class="headerlink" title="基于gitlab的工作流程设计"></a>基于gitlab的工作流程设计</h1><h2 id="软件开发阶段"><a href="#软件开发阶段" class="headerlink" title="软件开发阶段"></a><strong>软件开发阶段</strong></h2><ul>
<li><strong>IDEA</strong>： 每一个从点子开始的项目，通常来源于一次闲聊。在这个阶段，GitLab 集成了<a href="https://link.zhihu.com/?target=https://about.gitlab.com/2015/08/18/gitlab-loves-mattermost/">Mattermost</a>。</li>
<li><strong>ISSUE</strong>： 最有效的讨论一个点子的方法，就是为这个点子建立一个工单讨论。你的团队和你的合作伙伴可以在工单追踪器issue tracker中帮助你去提升这个点子</li>
<li><strong>PLAN</strong>： 一旦讨论得到一致的同意，就是开始编码的时候了。但是等等！首先，我们需要优先考虑组织我们的工作流。对于此，我们可以使用工单看板Issue Board。</li>
<li><strong>CODE</strong>： 现在，当一切准备就绪，我们可以开始写代码了。</li>
<li><strong>COMMIT</strong>： 当我们为我们的初步成果欢呼的时候，我们就可以在版本控制下，提交代码到功能分支了。</li>
<li><strong>TEST</strong>： 通过<a href="https://link.zhihu.com/?target=https://about.gitlab.com/gitlab-ci/">GitLab CI</a>，我们可以运行脚本来构建和测试我们的应用。</li>
<li><strong>REVIEW</strong>： 一旦脚本成功运行，我们测试和构建成功，我们就可以进行代码复审code review以及批准。</li>
<li><strong>STAGING：</strong>： 现在是时候<a href="https://link.zhihu.com/?target=https://about.gitlab.com/2016/08/05/continuous-integration-delivery-and-deployment-with-gitlab/">将我们的代码部署到演示环境</a>来检查一下，看看是否一切就像我们预估的那样顺畅——或者我们可能仍然需要修改。</li>
<li><strong>PRODUCTION</strong>： 当一切都如预期，就是<a href="https://link.zhihu.com/?target=https://about.gitlab.com/2016/08/05/continuous-integration-delivery-and-deployment-with-gitlab/">部署到生产环境</a>的时候了！</li>
<li><strong>FEEDBACK</strong>： 现在是时候返回去看我们项目中需要提升的部分了。我们使用<a href="https://link.zhihu.com/?target=https://about.gitlab.com/solutions/cycle-analytics/">周期分析 Cycle Analytics</a>来对当前项目中关键的部分进行的反馈。</li>
</ul>
<h1 id="m1-mac-Rosetta2转译"><a href="#m1-mac-Rosetta2转译" class="headerlink" title="m1 mac Rosetta2转译"></a>m1 mac Rosetta2转译</h1><p>m1 mac Rosetta2转译运行命令行程序如下:</p>
<p><code>arch -x86_64 /bin/zsh</code> 进入转译模式终端:进入后,在该终端执行的所有命令会默认以<code>arch -x86_64</code>开头</p>
<blockquote>
<p>可以使用<code>arch</code>或<code>uname -m</code>判断当前架构</p>
<p>如果返回i386或x86_64表明已经进入转译模式</p>
</blockquote>
<p>如果要单独执行的命令在转译模式下,只需要在前面添加<code>arch -x86_64 </code>即可</p>
<ul>
<li>从 Apple Silicon 支持开始，Homebrew 推荐在 ARM 处理器的 Mac 上使用 <code>/opt/homebrew</code> 作为安装路径</li>
<li>在 Intel 处理器架构设计的 Homebrew 默认安装路径（<code>/usr/local</code>）</li>
</ul>
<h1 id="mac上部署docker开发环境"><a href="#mac上部署docker开发环境" class="headerlink" title="mac上部署docker开发环境"></a>mac上部署docker开发环境</h1><blockquote>
<p>优势:在windows或mac上获得linux开发环境</p>
<ul>
<li>针对M系列芯片的docker已经完全适配</li>
<li>文件访问,使用挂载方式,可以保证文件共享,mac与linux系统之间文件访问没有障碍</li>
<li>资源消耗</li>
<li>外网访问</li>
</ul>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://www.youtube.com/watch?v=nK8Pij3CedY" alt="参考视频|720x360"></p>
<p>基于docker进行开发:</p>
<p><a target="_blank" rel="noopener" href="https://hub.docker.com/r/mlcollard/linux-dev">arm下linux环境的C++开发环境,带valgrind的docker</a></p>
<p><a target="_blank" rel="noopener" href="https://hub.docker.com/r/karek/valgrind">x64下linux环境的C++开发环境,带valgrind的docker</a>  mac上使用该docker环境会运行在Rosetta上</p>
<p>安装好docker两个镜像后配置vscode或clion</p>
<blockquote>
<p>此处附带一个微软官方的开发环境docker镜像(其内还支持vcpkg)   <a target="_blank" rel="noopener" href="https://hub.docker.com/_/microsoft-devcontainers-cpp">该镜像链接</a></p>
</blockquote>
<h2 id="clion配置示例"><a href="#clion配置示例" class="headerlink" title="clion配置示例"></a>clion配置示例</h2><blockquote>
<p>注意,Docker Desktop一定要一直开着,才能连接docker进行开发</p>
<p>除了Linux,Windows和Mac都是使用Docker Desktop</p>
</blockquote>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/che77a38/blogImage2/202406011713239.png" alt="image-20240601171257644" style="zoom:20%;" />

<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/che77a38/blogImage2/202406011713160.png" alt="image-20240601171337207" style="zoom:20%;" />

<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/che77a38/blogImage2/202406011714659.png" alt="image-20240601171414611" style="zoom:20%;" />

<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/che77a38/blogImage2/202406011714148.png" alt="image-20240601171458121" style="zoom:20%;" />

<h2 id="配置vcpkg"><a href="#配置vcpkg" class="headerlink" title="配置vcpkg"></a>配置vcpkg</h2><h2 id="运行效果"><a href="#运行效果" class="headerlink" title="运行效果"></a>运行效果</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Hello, World!&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    <span class="type">int</span> i=<span class="built_in">isupper</span>(<span class="string">&#x27;F&#x27;</span>);</span><br><span class="line">    <span class="type">int</span> j=<span class="built_in">isupper</span>(<span class="string">&#x27;f&#x27;</span>);</span><br><span class="line">    <span class="type">int32_t</span> f;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> *p = <span class="keyword">new</span> <span class="type">int</span>[<span class="number">100</span>];</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;for F is upper was &quot;</span>&lt;&lt;i&lt;&lt;endl;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;for f is upper was &quot;</span>&lt;&lt;j&lt;&lt;endl;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;Uninitialized int is &quot;</span>&lt;&lt;f&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这段代码在不同环境下的运行结果</p>
<ul>
<li><p>arm mac下</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Hello, World!</span><br><span class="line">for F is upper was 1</span><br><span class="line">for f is upper was 0</span><br><span class="line">Uninitialized int is 83668748</span><br></pre></td></tr></table></figure>
</li>
<li><p>arm linux下</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Hello, World!</span><br><span class="line">for F is upper was 256</span><br><span class="line">for f is upper was 0</span><br><span class="line">Uninitialized int is 65535</span><br></pre></td></tr></table></figure>
</li>
<li><p>X64 linux下</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Hello, World!</span><br><span class="line">for F is upper was 256</span><br><span class="line">for f is upper was 0</span><br><span class="line">Uninitialized int is 64</span><br></pre></td></tr></table></figure></li>
</ul>
<p>使用[[C++相关工具盘点#valgrind|valgrind]]步骤</p>
<h2 id="valgrind使用"><a href="#valgrind使用" class="headerlink" title="valgrind使用"></a>valgrind使用</h2><p>在容器中使用<code>whereis valgrind</code>查看valgrind位置,将可执行文件位置拷贝到clion的设置-构建、执行、部署-动态分析工具-Valgrind</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/che77a38/blogImage2/202406030925868.png" alt="image-20240603092546972" style="zoom:25%;" />

<p>创建docker容器的目的仅仅是获知valgrind的可执行文件的地址填入clion,因为clion实际上会自动启用无名的临时docker容器,无法进入终端.</p>
<p>接下来只需要点击下图所选项即可</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/che77a38/blogImage2/202406030934333.png" alt="image-20240603093426918" style="zoom:25%;" />

<h2 id="vscode使用docker开发环境"><a href="#vscode使用docker开发环境" class="headerlink" title="vscode使用docker开发环境"></a>vscode使用docker开发环境</h2><p><a href="#%E5%AE%B9%E5%99%A8%E5%BC%80%E5%8F%91%E6%94%AF%E6%8C%81">vscode的docker插件</a>,针对镜像可以右键选择<strong>附加Visual studio code</strong></p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/che77a38/blogImage2/202406031929357.png" alt="image-20240603192915759" style="zoom: 33%;" />

<p>将会打开一个在docker中的vscode,在docker中打开的vscode没有任何插件,需要重新为docker中的vscode安装</p>
<p>使用<a href="#%E5%AE%B9%E5%99%A8%E5%BC%80%E5%8F%91%E6%94%AF%E6%8C%81">Dev Containers</a>会更简单一些,可以轻松配置一些需要用到的环境</p>
<h2 id="使用Dev-Containers开发流程"><a href="#使用Dev-Containers开发流程" class="headerlink" title="使用Dev Containers开发流程"></a>使用Dev Containers开发流程</h2><p><a target="_blank" rel="noopener" href="https://grauneko.com/index.php/archives/64/">详情可点击参考</a></p>
<h3 id="已经存在容器"><a href="#已经存在容器" class="headerlink" title="已经存在容器"></a>已经存在容器</h3><ul>
<li><p>运行一个开发容器(同时将现在的目录挂载到容器内<code>/work</code>路径)</p>
<p><code>docker run -it --rm -v $(pwd):/work 开发镜像名</code></p>
</li>
<li><p>在Dev Containers中将看到在运行的容器,点击附加到容器</p>
</li>
<li><p>在新打开的vscode中到<code>/work</code>路径下工作,还需要为vscode重新安装相关拓展</p>
</li>
</ul>
<h3 id="Dev-Containers自带的开发容器"><a href="#Dev-Containers自带的开发容器" class="headerlink" title="Dev Containers自带的开发容器"></a>Dev Containers自带的开发容器</h3><p>也可以直接使用Dev Containers拓展中的<code>新的开发容器</code>选项:创建一个容器,默认自带了常用开发套件,包括vcpkg</p>
<p>在m1 mac上自动生成的cpp容器需要更改devcontainer.json文件内容,如下:(因为是arm架构)(其他视图固化的指令修改也可以通过类似操作实现)</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;C++&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">	<span class="attr">&quot;dockerfile&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Dockerfile&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;containerEnv&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">	<span class="attr">&quot;VCPKG_FORCE_SYSTEM_BINARIES&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>新增<code>containerEnv</code>块,目的是相当于执行了<code>export VCPKG_FORCE_SYSTEM_BINARIES=1</code>(但重启不会生效),或相当于Dockerfile添加了<code>ENV VCPKG_FORCE_SYSTEM_BINARIES=1</code>,添加后会询问是否重建容器</p>
<p>这样的好处是,拓展帮我们自行进行映射,vcpkg安装的东西,项目文件夹中的所有改动,以及vcpkg安装的拓展都会帮我们映射到相应的卷中,非常方便</p>
<h2 id="如果连接的是远程主机上的docker"><a href="#如果连接的是远程主机上的docker" class="headerlink" title="如果连接的是远程主机上的docker"></a>如果连接的是远程主机上的docker</h2><p>需要先通过remote ssh连接到远程主机,再使用docker插件或Dev Containers插件连接到远程主机上的docker.</p>
<p>但是连接到远程主机上的docker会没有用户权限(发现无法连接),需要将登陆用户添加到docker用户组中</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo gpasswd -a &lt;当前登录用户名&gt; docker</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">从用户组中删除</span></span><br><span class="line">sudo gpasswd -d &lt;当前登录用户名&gt; docker</span><br></pre></td></tr></table></figure>

<p>重启远程服务器即可使用</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo reboot</span><br></pre></td></tr></table></figure>

<blockquote>
<p>p.s. 改动的过程中<strong>频繁需要输入密码</strong>,可以通过ssh key方式免掉这些输入密码的操作</p>
<ol>
<li><p><code>ssh-keygen</code>先生成公私密钥对</p>
<p>生成与放置的位置,以windows和Linux为例</p>
<p><code>/home/用户名/.ssh</code></p>
<p><code>C://用户/用户名/.ssh</code></p>
</li>
<li><p>将公钥(pub后缀文件)放到远程服务器的这个路径</p>
</li>
</ol>
<p>即生效(不生效的话重启远程服务器)</p>
</blockquote>
<h1 id="mac环境变量配置"><a href="#mac环境变量配置" class="headerlink" title="mac环境变量配置"></a>mac环境变量配置</h1><p>在macOS上,双击启动应用程序和在命令行中执行<code>open Ollama.app</code>有以下几个主要区别</p>
<ul>
<li><strong>双击启动</strong>: macOS的Finder是通过Launch Services来管理和启动应用程序的,Launch Services不会读取<code>/etc/profile</code>或用户的shell环境配置</li>
<li><strong>命令行启动</strong>: 通过命令行启动时,应用程序的进程是由当前shell fork出来的,所以它能继承当前shell的环境变量配置</li>
</ul>
<p>相比于使用<code>export OLLAMA_HOST=0.0.0.0:11434</code>配置环境变量</p>
<p>使用下面来配置,可以同时作用于双击启动和命令行启动</p>
<p><code>launchctl setenv OLLAMA_HOST &quot;0.0.0.0:11434&quot;</code>  允许任何来源ip访问11434端口</p>
<p>取消设置使用:<code>launchctl unsetenv OLLAMA_HOST</code></p>
<h1 id="mac上的虚拟机方案"><a href="#mac上的虚拟机方案" class="headerlink" title="mac上的虚拟机方案"></a>mac上的虚拟机方案</h1><p>multipass:一键运行ubuntu,纯命令行操作,不占资源</p>
<p>ipad上可以使用utm</p>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://avatars.githubusercontent.com/u/27732581?s=400&amp;u=303b2c0e2118ad20406f8d718e885bcf99fc8bf8&amp;v=4" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://avatars.githubusercontent.com/u/27732581?s=400&amp;u=303b2c0e2118ad20406f8d718e885bcf99fc8bf8&amp;v=4" title="头像" alt="头像"></a><div class="post-copyright__author_name">ZEROKO14</div><div class="post-copyright__author_desc">zeroko14's blog</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://che77a38.github.io/posts/mac%E5%8F%8Alinux_C++%E7%8E%AF%E5%A2%83/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://che77a38.github.io/posts/mac%E5%8F%8Alinux_C++%E7%8E%AF%E5%A2%83/')">mac及linux C++环境配置</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://che77a38.github.io/posts/mac%E5%8F%8Alinux_C++%E7%8E%AF%E5%A2%83/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=mac及linux C++环境配置&amp;url=https://che77a38.github.io/posts/mac%E5%8F%8Alinux_C++%E7%8E%AF%E5%A2%83/&amp;pic=" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://che77a38.github.io" target="_blank">ZEROKO14的个人博客</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/C/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>C++<span class="tagsPageCount">5</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://avatars.githubusercontent.com/u/27732581?s=400&amp;u=303b2c0e2118ad20406f8d718e885bcf99fc8bf8&amp;v=4" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/git/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">git详解</div></div></a></div><div class="next-post pull-right"><a href="/posts/%E5%BC%80%E5%8F%91%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">开发项目管理</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/posts/C++%E7%9B%B8%E5%85%B3%E5%B7%A5%E5%85%B7%E7%9B%98%E7%82%B9/" title="C++相关工具盘点"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-04-22</div><div class="title">C++相关工具盘点</div></div></a></div><div><a href="/posts/C++%E5%A4%9A%E7%BA%BF%E7%A8%8B/" title="C++多线程"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-07-18</div><div class="title">C++多线程</div></div></a></div><div><a href="/posts/C++11%E4%B8%8E14/" title="C++11与14"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-11-28</div><div class="title">C++11与14</div></div></a></div><div><a href="/posts/opencv/" title="opencv"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-04-29</div><div class="title">opencv</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://avatars.githubusercontent.com/u/27732581?s=400&amp;u=303b2c0e2118ad20406f8d718e885bcf99fc8bf8&amp;v=4" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__description">欢迎来到ZEROKO14的个人博客</div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">ZEROKO14</h1><div class="author-info__desc">zeroko14's blog</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/che77a38" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#vscode%E5%BF%AB%E6%8D%B7%E9%94%AE"><span class="toc-number">1.</span> <span class="toc-text">vscode快捷键</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#makeFile%E5%AD%A6%E4%B9%A0"><span class="toc-number">2.</span> <span class="toc-text">makeFile学习</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%96%E8%AF%91%E5%99%A8%E7%9B%B8%E5%85%B3"><span class="toc-number">2.1.</span> <span class="toc-text">编译器相关</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%96%E8%AF%91%E6%97%B6%E7%9B%B8%E5%85%B3%E6%96%87%E4%BB%B6%E6%9F%A5%E6%89%BE%E9%A1%BA%E5%BA%8F"><span class="toc-number">2.2.</span> <span class="toc-text">编译时相关文件查找顺序</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#GDB%E8%B0%83%E8%AF%95%E5%99%A8"><span class="toc-number">2.3.</span> <span class="toc-text">GDB调试器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#GDB%E4%B8%BB%E8%A6%81%E5%8A%9F%E8%83%BD"><span class="toc-number">2.3.1.</span> <span class="toc-text">GDB主要功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E8%B0%83%E8%AF%95%E5%91%BD%E4%BB%A4%E5%8F%82%E6%95%B0"><span class="toc-number">2.3.2.</span> <span class="toc-text">常用调试命令参数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#list%E6%98%BE%E7%A4%BA%E4%BB%A3%E7%A0%81%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3"><span class="toc-number">2.3.2.1.</span> <span class="toc-text">list显示代码命令详解</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#break%E8%AE%BE%E7%BD%AE%E6%96%AD%E7%82%B9%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3"><span class="toc-number">2.3.2.2.</span> <span class="toc-text">break设置断点命令详解</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E6%96%AD%E7%82%B9%E2%80%93%E5%BD%93%E5%89%8D%E6%96%87%E4%BB%B6"><span class="toc-number">2.3.2.2.1.</span> <span class="toc-text">简单断点–当前文件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A4%9A%E6%96%87%E4%BB%B6%E8%AE%BE%E7%BD%AE%E6%96%AD%E7%82%B9"><span class="toc-number">2.3.2.2.2.</span> <span class="toc-text">多文件设置断点</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E6%89%80%E6%9C%89%E6%96%AD%E7%82%B9"><span class="toc-number">2.3.2.2.3.</span> <span class="toc-text">查询所有断点</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E6%96%AD%E7%82%B9"><span class="toc-number">2.3.2.2.4.</span> <span class="toc-text">条件断点</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BB%B4%E6%8A%A4%E6%96%AD%E7%82%B9"><span class="toc-number">2.3.2.2.5.</span> <span class="toc-text">维护断点</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%B0%83%E8%AF%95%E4%BB%A3%E7%A0%81"><span class="toc-number">2.3.2.2.6.</span> <span class="toc-text">调试代码</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%98%BE%E7%A4%BA%E8%BF%90%E8%A1%8C%E4%B8%AD%E4%BF%A1%E6%81%AF"><span class="toc-number">2.3.2.2.7.</span> <span class="toc-text">显示运行中信息</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#makefile%E5%9F%BA%E6%9C%AC%E6%A0%BC%E5%BC%8F"><span class="toc-number">2.4.</span> <span class="toc-text">makefile基本格式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#makefile%E4%B8%AD%E7%9A%84%E5%8F%98%E9%87%8F"><span class="toc-number">2.5.</span> <span class="toc-text">makefile中的变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%A1%E5%BC%8F%E8%A7%84%E5%88%99"><span class="toc-number">2.6.</span> <span class="toc-text">模式规则</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#makefile%E7%9A%84%E6%B8%85%E7%90%86%E6%93%8D%E4%BD%9C"><span class="toc-number">2.7.</span> <span class="toc-text">makefile的清理操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#makefile%E5%91%BD%E4%BB%A4%E4%B8%AD%E7%9A%84%E7%89%B9%E6%AE%8A%E7%AC%A6%E5%8F%B7"><span class="toc-number">2.8.</span> <span class="toc-text">makefile命令中的特殊符号</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#make%E5%91%BD%E4%BB%A4%E7%9A%84%E5%8F%82%E6%95%B0"><span class="toc-number">2.9.</span> <span class="toc-text">make命令的参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#makefile%E7%9A%84%E5%B8%B8%E8%A7%81%E5%87%BD%E6%95%B0"><span class="toc-number">2.10.</span> <span class="toc-text">makefile的常见函数</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#cmake%E5%AD%A6%E4%B9%A0"><span class="toc-number">3.</span> <span class="toc-text">cmake学习</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95%E7%89%B9%E6%80%A7%E4%BB%8B%E7%BB%8D"><span class="toc-number">3.1.</span> <span class="toc-text">语法特性介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%87%8D%E8%A6%81%E6%8C%87%E4%BB%A4"><span class="toc-number">3.2.</span> <span class="toc-text">重要指令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CMake%E5%B8%B8%E7%94%A8%E5%8F%98%E9%87%8F"><span class="toc-number">3.3.</span> <span class="toc-text">CMake常用变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CMAKE%E7%BC%96%E8%AF%91%E5%B7%A5%E7%A8%8B"><span class="toc-number">3.4.</span> <span class="toc-text">CMAKE编译工程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%A4%E7%A7%8D%E6%96%B9%E5%BC%8F%E8%AE%BE%E7%BD%AE%E7%BC%96%E8%AF%91%E8%A7%84%E5%88%99"><span class="toc-number">3.4.1.</span> <span class="toc-text">两种方式设置编译规则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E8%AF%91%E6%B5%81%E7%A8%8B"><span class="toc-number">3.4.2.</span> <span class="toc-text">编译流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%A4%E7%A7%8D%E6%9E%84%E5%BB%BA%E6%96%B9%E5%BC%8F"><span class="toc-number">3.4.3.</span> <span class="toc-text">两种构建方式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E3%80%90%E5%AE%9E%E6%88%98%E3%80%91CMake%E4%BB%A3%E7%A0%81%E5%AE%9E%E8%B7%B5"><span class="toc-number">3.5.</span> <span class="toc-text">【实战】CMake代码实践</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%80%E5%B0%8F%E7%9A%84CMake%E5%B7%A5%E7%A8%8B"><span class="toc-number">3.5.1.</span> <span class="toc-text">最小的CMake工程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E7%9B%AE%E5%BD%95%E5%B7%A5%E7%A8%8B-%E7%9B%B4%E6%8E%A5%E7%BC%96%E8%AF%91"><span class="toc-number">3.5.2.</span> <span class="toc-text">多目录工程-直接编译</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vscode%E9%85%8D%E5%90%88cmake%E8%BF%9B%E8%A1%8C%E8%B0%83%E8%AF%95"><span class="toc-number">3.6.</span> <span class="toc-text">vscode配合cmake进行调试</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cmake%E8%BF%9B%E9%98%B6"><span class="toc-number">3.7.</span> <span class="toc-text">cmake进阶</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%8E%B0%E4%BB%A3CMAKE"><span class="toc-number">3.8.</span> <span class="toc-text">现代CMAKE</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BB%88%E7%AB%AF%E6%8C%87%E4%BB%A4%E5%AD%A6%E4%B9%A0"><span class="toc-number">4.</span> <span class="toc-text">终端指令学习</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4"><span class="toc-number">4.1.</span> <span class="toc-text">基本指令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#homebrew%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-number">4.2.</span> <span class="toc-text">homebrew常用命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%85%E5%85%8B%E9%9A%86%E9%97%AE%E9%A2%98"><span class="toc-number">4.2.1.</span> <span class="toc-text">浅克隆问题</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#win%E7%BB%88%E7%AB%AF%E5%91%BD%E4%BB%A4%E7%9B%B8%E5%85%B3"><span class="toc-number">5.</span> <span class="toc-text">win终端命令相关</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%88%E7%AB%AF%E5%91%BD%E4%BB%A4%E9%87%8D%E5%91%BD%E5%90%8D"><span class="toc-number">5.1.</span> <span class="toc-text">终端命令重命名</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#powershell%E6%96%B0%E5%BB%BA%E6%96%87%E4%BB%B6%E5%91%BD%E4%BB%A4"><span class="toc-number">5.2.</span> <span class="toc-text">powershell新建文件命令</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%B7%A5%E5%85%B7%E5%91%BD%E4%BB%A4"><span class="toc-number">6.</span> <span class="toc-text">工具命令</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#ssh"><span class="toc-number">6.1.</span> <span class="toc-text">ssh</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#scp"><span class="toc-number">6.2.</span> <span class="toc-text">scp</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E8%B0%83%E8%AF%95"><span class="toc-number">7.</span> <span class="toc-text">代码调试</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#IDE%E7%9B%B8%E5%85%B3tips"><span class="toc-number">8.</span> <span class="toc-text">IDE相关tips</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#vs%E5%BC%80%E5%8F%91linux%E9%A1%B9%E7%9B%AE"><span class="toc-number">8.1.</span> <span class="toc-text">vs开发linux项目</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#VS%E8%BF%9C%E7%A8%8B%E5%BC%80%E5%8F%91"><span class="toc-number">8.1.1.</span> <span class="toc-text">VS远程开发</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vscode%E8%BF%9C%E7%A8%8B%E5%BC%80%E5%8F%91"><span class="toc-number">8.2.</span> <span class="toc-text">vscode远程开发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#vscode%E9%85%8D%E7%BD%AEC-%E8%B0%83%E8%AF%95"><span class="toc-number">8.2.1.</span> <span class="toc-text">vscode配置C++调试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#code-runner%E9%85%8D%E7%BD%AE"><span class="toc-number">8.3.</span> <span class="toc-text">code runner配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#windows%E4%B8%8B%E7%9A%84vscode%E7%BB%88%E7%AB%AF%E4%B9%B1%E7%A0%81"><span class="toc-number">8.4.</span> <span class="toc-text">windows下的vscode终端乱码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vscode%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">8.5.</span> <span class="toc-text">vscode的配置文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#tasks-json"><span class="toc-number">8.5.1.</span> <span class="toc-text">tasks.json</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#launch-json"><span class="toc-number">8.5.2.</span> <span class="toc-text">launch.json</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B"><span class="toc-number">8.5.2.1.</span> <span class="toc-text">案例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#c-cpp-properties-json"><span class="toc-number">8.5.3.</span> <span class="toc-text">c_cpp_properties.json</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vscode%E6%8F%92%E4%BB%B6"><span class="toc-number">8.6.</span> <span class="toc-text">vscode插件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#CMake-Tools%E6%8F%92%E4%BB%B6"><span class="toc-number">8.6.1.</span> <span class="toc-text">CMake Tools插件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vscode-clangd%E6%8F%92%E4%BB%B6"><span class="toc-number">8.6.2.</span> <span class="toc-text">vscode clangd插件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vscode-Clang-Format%E6%8F%92%E4%BB%B6"><span class="toc-number">8.6.3.</span> <span class="toc-text">vscode Clang-Format插件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tabout"><span class="toc-number">8.6.4.</span> <span class="toc-text">tabout</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#gitlens"><span class="toc-number">8.6.5.</span> <span class="toc-text">gitlens</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E8%B7%AF%E5%BE%84%E8%B7%B3%E8%BD%AC%E6%8F%92%E4%BB%B6"><span class="toc-number">8.6.6.</span> <span class="toc-text">文件路径跳转插件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#C-C-Include-Guard%E6%8F%92%E4%BB%B6"><span class="toc-number">8.6.7.</span> <span class="toc-text">C&#x2F;C++ Include Guard插件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#c-cpp-cmake-project-creator%E6%8F%92%E4%BB%B6"><span class="toc-number">8.6.8.</span> <span class="toc-text">c cpp cmake project creator插件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Debug-Visualizer"><span class="toc-number">8.6.9.</span> <span class="toc-text">Debug Visualizer</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%98%E9%87%8F%E5%90%8D%E7%BF%BB%E8%AF%91"><span class="toc-number">8.6.10.</span> <span class="toc-text">变量名翻译</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E8%A1%A5%E5%88%86%E5%8F%B7"><span class="toc-number">8.6.11.</span> <span class="toc-text">自动补分号</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E6%8F%92%E4%BB%B6"><span class="toc-number">8.6.12.</span> <span class="toc-text">单元测试插件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%B9%E5%99%A8%E5%BC%80%E5%8F%91%E6%94%AF%E6%8C%81"><span class="toc-number">8.6.13.</span> <span class="toc-text">容器开发支持</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#docker%E6%8F%92%E4%BB%B6"><span class="toc-number">8.6.13.1.</span> <span class="toc-text">docker插件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Dev-Containers%E6%8F%92%E4%BB%B6"><span class="toc-number">8.6.13.2.</span> <span class="toc-text">Dev Containers插件</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E6%82%AC%E6%B5%AE%E7%BF%BB%E8%AF%91%E6%8F%92%E4%BB%B6"><span class="toc-number">8.6.14.</span> <span class="toc-text">代码悬浮翻译插件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E6%96%87%E4%BB%B6%E9%AB%98%E4%BA%AE%E6%98%BE%E7%A4%BA%E6%8F%92%E4%BB%B6"><span class="toc-number">8.6.15.</span> <span class="toc-text">日志文件高亮显示插件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90Getter%E5%92%8CSetter%E5%87%BD%E6%95%B0"><span class="toc-number">8.6.16.</span> <span class="toc-text">自动生成Getter和Setter函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E9%94%AE%E5%A4%8D%E5%88%B6%E6%96%87%E4%BB%B6%E7%BB%99AI%E7%AD%89%E7%BB%93%E5%90%88Aider%E4%BD%BF%E7%94%A8"><span class="toc-number">8.6.17.</span> <span class="toc-text">一键复制文件给AI等结合Aider使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%AF%E8%A7%86%E5%8C%96%E6%96%87%E4%BB%B6%E6%8F%92%E4%BB%B6"><span class="toc-number">8.6.18.</span> <span class="toc-text">可视化文件插件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JavaScript-Debugger"><span class="toc-number">8.6.19.</span> <span class="toc-text">JavaScript Debugger</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#css-pick"><span class="toc-number">8.6.20.</span> <span class="toc-text">css pick</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#console-ninja"><span class="toc-number">8.6.21.</span> <span class="toc-text">console ninja</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Code-spell-chacker"><span class="toc-number">8.6.22.</span> <span class="toc-text">Code spell chacker</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E4%B9%A6%E7%AD%BE%E6%8F%92%E4%BB%B6"><span class="toc-number">8.6.23.</span> <span class="toc-text">代码书签插件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E9%87%8A%E4%B8%AD%E7%9A%84todo%E9%AB%98%E4%BA%AE%E6%8F%92%E4%BB%B6"><span class="toc-number">8.6.24.</span> <span class="toc-text">注释中的todo高亮插件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B2%98%E8%B4%B4JSON%E5%8F%98%E4%B8%BA%E7%B1%BB"><span class="toc-number">8.6.25.</span> <span class="toc-text">粘贴JSON变为类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#c-%E7%9B%B8%E5%85%B3%E6%8F%92%E4%BB%B6%E7%9B%98%E7%82%B9"><span class="toc-number">8.6.26.</span> <span class="toc-text">c#相关插件盘点</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%8ECSharp%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90PlantUML%E7%B1%BB%E5%9B%BE"><span class="toc-number">8.6.26.1.</span> <span class="toc-text">从CSharp代码生成PlantUML类图</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vscode%E9%85%8D%E7%BD%AEqt%E5%BC%80%E5%8F%91"><span class="toc-number">8.7.</span> <span class="toc-text">vscode配置qt开发</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vs%E5%9B%A2%E9%98%9F%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86%E5%99%A8"><span class="toc-number">8.8.</span> <span class="toc-text">vs团队资源管理器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E9%A1%B5%E4%BB%8B%E7%BB%8D"><span class="toc-number">8.8.1.</span> <span class="toc-text">主页介绍</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vscode%E7%9B%B8%E5%85%B3%E8%AE%BE%E7%BD%AE"><span class="toc-number">8.9.</span> <span class="toc-text">vscode相关设置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vs%E7%9B%B8%E5%85%B3%E8%AE%BE%E7%BD%AE"><span class="toc-number">8.10.</span> <span class="toc-text">vs相关设置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%99windows%E9%85%8D%E7%BD%AEssh-server"><span class="toc-number">8.11.</span> <span class="toc-text">给windows配置ssh server</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%A3%E7%90%86%E7%9B%B8%E5%85%B3"><span class="toc-number">9.</span> <span class="toc-text">代理相关</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F"><span class="toc-number">9.1.</span> <span class="toc-text">代理模式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DNS%E5%88%86%E6%B5%81"><span class="toc-number">9.2.</span> <span class="toc-text">DNS分流</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#UDP%E7%A9%BF%E9%80%8F%E7%AF%87"><span class="toc-number">9.3.</span> <span class="toc-text">UDP穿透篇</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#clash%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">9.4.</span> <span class="toc-text">clash配置文件</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%BC%E5%AE%B9%E6%80%A7%E7%9B%B8%E5%85%B3"><span class="toc-number">10.</span> <span class="toc-text">兼容性相关</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91"><span class="toc-number">11.</span> <span class="toc-text">交叉编译</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8Egitlab%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E8%AE%BE%E8%AE%A1"><span class="toc-number">12.</span> <span class="toc-text">基于gitlab的工作流程设计</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91%E9%98%B6%E6%AE%B5"><span class="toc-number">12.1.</span> <span class="toc-text">软件开发阶段</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#m1-mac-Rosetta2%E8%BD%AC%E8%AF%91"><span class="toc-number">13.</span> <span class="toc-text">m1 mac Rosetta2转译</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#mac%E4%B8%8A%E9%83%A8%E7%BD%B2docker%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83"><span class="toc-number">14.</span> <span class="toc-text">mac上部署docker开发环境</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#clion%E9%85%8D%E7%BD%AE%E7%A4%BA%E4%BE%8B"><span class="toc-number">14.1.</span> <span class="toc-text">clion配置示例</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AEvcpkg"><span class="toc-number">14.2.</span> <span class="toc-text">配置vcpkg</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C%E6%95%88%E6%9E%9C"><span class="toc-number">14.3.</span> <span class="toc-text">运行效果</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#valgrind%E4%BD%BF%E7%94%A8"><span class="toc-number">14.4.</span> <span class="toc-text">valgrind使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vscode%E4%BD%BF%E7%94%A8docker%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83"><span class="toc-number">14.5.</span> <span class="toc-text">vscode使用docker开发环境</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8Dev-Containers%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B"><span class="toc-number">14.6.</span> <span class="toc-text">使用Dev Containers开发流程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B7%B2%E7%BB%8F%E5%AD%98%E5%9C%A8%E5%AE%B9%E5%99%A8"><span class="toc-number">14.6.1.</span> <span class="toc-text">已经存在容器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Dev-Containers%E8%87%AA%E5%B8%A6%E7%9A%84%E5%BC%80%E5%8F%91%E5%AE%B9%E5%99%A8"><span class="toc-number">14.6.2.</span> <span class="toc-text">Dev Containers自带的开发容器</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A6%82%E6%9E%9C%E8%BF%9E%E6%8E%A5%E7%9A%84%E6%98%AF%E8%BF%9C%E7%A8%8B%E4%B8%BB%E6%9C%BA%E4%B8%8A%E7%9A%84docker"><span class="toc-number">14.7.</span> <span class="toc-text">如果连接的是远程主机上的docker</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#mac%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E9%85%8D%E7%BD%AE"><span class="toc-number">15.</span> <span class="toc-text">mac环境变量配置</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#mac%E4%B8%8A%E7%9A%84%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%96%B9%E6%A1%88"><span class="toc-number">16.</span> <span class="toc-text">mac上的虚拟机方案</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/%E5%B7%A5%E4%B8%9A%E7%9B%B8%E5%85%B3/" title="工业相关">工业相关</a><time datetime="2025-02-14T03:04:40.761Z" title="发表于 2025-02-14 11:04:40">2025-02-14</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/%E8%AE%A1%E7%BB%84/" title="计算机组成原理">计算机组成原理</a><time datetime="2024-12-16T01:38:01.470Z" title="发表于 2024-12-16 09:38:01">2024-12-16</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84/" title="网络架构">网络架构</a><time datetime="2024-11-18T06:17:01.282Z" title="发表于 2024-11-18 14:17:01">2024-11-18</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/avalonia/" title="avalonia">avalonia</a><time datetime="2024-09-11T14:51:13.000Z" title="发表于 2024-09-11 22:51:13">2024-09-11</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/%E8%A7%86%E9%A2%91%E6%95%88%E6%9E%9C/" title="PR">PR</a><time datetime="2024-07-18T07:06:08.330Z" title="发表于 2024-07-18 15:06:08">2024-07-18</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2020 - 2025 By <a class="footer-bar-link" href="/" title="ZEROKO14" target="_blank">ZEROKO14</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu"></a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">60</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">50</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">6</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.anheyu.com/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="安知鱼图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="安知鱼图床"/><span class="back-menu-item-text">安知鱼图床</span></a></div></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/C/" style="font-size: 0.88rem;">C#<sup>2</sup></a><a href="/tags/C/" style="font-size: 0.88rem;">C++<sup>5</sup></a><a href="/tags/CSS/" style="font-size: 0.88rem;">CSS<sup>1</sup></a><a href="/tags/CSharp/" style="font-size: 0.88rem;">CSharp<sup>1</sup></a><a href="/tags/C%E8%AF%AD%E8%A8%80/" style="font-size: 0.88rem;">C语言<sup>1</sup></a><a href="/tags/FPS/" style="font-size: 0.88rem;">FPS<sup>1</sup></a><a href="/tags/HTML/" style="font-size: 0.88rem;">HTML<sup>1</sup></a><a href="/tags/JavaScript/" style="font-size: 0.88rem;">JavaScript<sup>1</sup></a><a href="/tags/MFC/" style="font-size: 0.88rem;">MFC<sup>1</sup></a><a href="/tags/PE/" style="font-size: 0.88rem;">PE<sup>1</sup></a><a href="/tags/QT/" style="font-size: 0.88rem;">QT<sup>1</sup></a><a href="/tags/WPF/" style="font-size: 0.88rem;">WPF<sup>2</sup></a><a href="/tags/ai/" style="font-size: 0.88rem;">ai<sup>1</sup></a><a href="/tags/cmake/" style="font-size: 0.88rem;">cmake<sup>1</sup></a><a href="/tags/doxygen/" style="font-size: 0.88rem;">doxygen<sup>1</sup></a><a href="/tags/git/" style="font-size: 0.88rem;">git<sup>1</sup></a><a href="/tags/json/" style="font-size: 0.88rem;">json<sup>1</sup></a><a href="/tags/linux/" style="font-size: 0.88rem;">linux<sup>1</sup></a><a href="/tags/nas/" style="font-size: 0.88rem;">nas<sup>1</sup></a><a href="/tags/next/" style="font-size: 0.88rem;">next<sup>1</sup></a><a href="/tags/ppt/" style="font-size: 0.88rem;">ppt<sup>1</sup></a><a href="/tags/slidev/" style="font-size: 0.88rem;">slidev<sup>1</sup></a><a href="/tags/vue/" style="font-size: 0.88rem;">vue<sup>1</sup></a><a href="/tags/xml/" style="font-size: 0.88rem;">xml<sup>1</sup></a><a href="/tags/yaml/" style="font-size: 0.88rem;">yaml<sup>1</sup></a><a href="/tags/%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83/" style="font-size: 0.88rem;">代码规范<sup>1</sup></a><a href="/tags/%E5%86%85%E6%A0%B8/" style="font-size: 0.88rem;">内核<sup>2</sup></a><a href="/tags/%E5%86%85%E6%A0%B8%E7%9B%B8%E5%85%B3/" style="font-size: 0.88rem;">内核相关<sup>5</sup></a><a href="/tags/%E5%8A%A0%E8%A7%A3%E5%AF%86/" style="font-size: 0.88rem;">加解密<sup>1</sup></a><a href="/tags/%E5%9F%BA%E7%A1%80/" style="font-size: 0.88rem;">基础<sup>2</sup></a><a href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" style="font-size: 0.88rem;">多线程<sup>1</sup></a><a href="/tags/%E5%B9%B6%E5%8F%91%E6%A8%A1%E5%BC%8F/" style="font-size: 0.88rem;">并发模式<sup>1</sup></a><a href="/tags/%E5%BC%80%E5%8F%91/" style="font-size: 0.88rem;">开发<sup>4</sup></a><a href="/tags/%E6%95%B0%E5%AD%A6/" style="font-size: 0.88rem;">数学<sup>1</sup></a><a href="/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" style="font-size: 0.88rem;">正则表达式<sup>1</sup></a><a href="/tags/%E7%9B%91%E6%8E%A7/" style="font-size: 0.88rem;">监控<sup>1</sup></a><a href="/tags/%E7%A1%AC%E7%BC%96%E7%A0%81/" style="font-size: 0.88rem;">硬编码<sup>1</sup></a><a href="/tags/%E7%AE%A1%E7%90%86/" style="font-size: 0.88rem;">管理<sup>1</sup></a><a href="/tags/%E7%BD%91%E7%BB%9C/" style="font-size: 0.88rem;">网络<sup>3</sup></a><a href="/tags/%E9%80%86%E5%90%91/" style="font-size: 0.88rem;">逆向<sup>2</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="is-center" id="loading-database"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-pulse-icon"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script async src="/anzhiyu/random.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      tags: 'ams'
    },
    chtml: {
      scale: 1.1
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, '']
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.cbd.int/mathjax@3.2.2/es5/tex-mml-chtml.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typesetPromise()
}</script><script>(() => {
  const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaid.length === 0) return
  const runMermaid = () => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    Array.from($mermaid).forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
      const mermaidID = 'mermaid-' + index
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)

      const renderV10 = () => {
        renderFn.then(({svg}) => {
          mermaidSrc.insertAdjacentHTML('afterend', svg)
        })
      }

      const renderV9 = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      typeof renderFn === 'string' ? renderV9(renderFn) : renderV10()
    })
  }

  const loadMermaid = () => {
    window.loadMermaid ? runMermaid() : getScript('https://cdn.cbd.int/mermaid@10.2.4/dist/mermaid.min.js').then(runMermaid)
  }

  anzhiyu.addGlobalFn('themeChange', runMermaid, 'mermaid')

  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script><input type="hidden" name="page-type" id="page-type" value="post"></div><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>